"use strict";(self.webpackChunkcumulocity_processing_widget_plugin=self.webpackChunkcumulocity_processing_widget_plugin||[]).push([[11212],{11212:function(e,t,i){var n;i.r(t),i.d(t,{BsModalRef:function(){return c},BsModalService:function(){return R},MODAL_CONFIG_DEFAULT_OVERRIDE:function(){return p},ModalBackdropComponent:function(){return I},ModalBackdropOptions:function(){return l},ModalContainerComponent:function(){return E},ModalDirective:function(){return M},ModalModule:function(){return B},ModalOptions:function(){return h}});var o=i(40761),s=i(38310),r=i(81269),a=i(35746),d=i(88553);class c{constructor(){this.hide=()=>{},this.setClass=()=>{}}}c.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:c,deps:[],target:o["ɵɵFactoryTarget"].Injectable}),c.ɵprov=o["ɵɵngDeclareInjectable"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:c,providedIn:"platform"}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:c,decorators:[{type:o.Injectable,args:[{providedIn:"platform"}]}]});class l{constructor(e){this.animate=!0,Object.assign(this,e)}}class h{}h.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:h,deps:[],target:o["ɵɵFactoryTarget"].Injectable}),h.ɵprov=o["ɵɵngDeclareInjectable"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:h,providedIn:"platform"}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:h,decorators:[{type:o.Injectable,args:[{providedIn:"platform"}]}]});const m={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},p=new o.InjectionToken("override-default-config"),g="modal-scrollbar-measure",u="modal-backdrop",y="modal-open",v="fade",f="in",b="show",_=300,w=150,k="backdrop-click",S="esc",C="browser-back-navigation-clicked";class E{constructor(e,t,i){this._element=t,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},e)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,v),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout((()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,(0,s.isBs3)()?f:b)}),this.isAnimated?w:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,y),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(e){this.clickStartedInContent=e.target!==this._element.nativeElement}onClickStop(e){const t=e.target===this._element.nativeElement&&!this.clickStartedInContent;!this.config.ignoreBackdropClick&&"static"!==this.config.backdrop&&t?(this.bsModalService?.setDismissReason(k),this.hide()):this.clickStartedInContent=!1}onPopState(){this.bsModalService?.setDismissReason(C),this.hide()}onEsc(e){this.isShown&&(27!==e.keyCode&&"Escape"!==e.key||e.preventDefault(),this.config.keyboard&&this.level===this.bsModalService?.getModalsCount()&&(this.bsModalService?.setDismissReason(S),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){!this.isModalHiding&&this.isShown&&(this.config.closeInterceptor?this.config.closeInterceptor().then((()=>this._hide()),(()=>{})):this._hide())}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,(0,s.isBs3)()?f:b),setTimeout((()=>{this.isShown=!1,document&&document.body&&1===this.bsModalService?.getModalsCount()&&(this._renderer.removeClass(document.body,y),this._renderer.setStyle(document.body,"overflow-y","")),this.bsModalService?.hide(this.config.id),this.isModalHiding=!1}),this.isAnimated?_:0)}}E.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:E,deps:[{token:h},{token:o.ElementRef},{token:o.Renderer2}],target:o["ɵɵFactoryTarget"].Component}),E.ɵcmp=o["ɵɵngDeclareComponent"]({minVersion:"14.0.0",version:"14.0.6",type:E,selector:"modal-container",host:{attributes:{role:"dialog",tabindex:"-1"},listeners:{mousedown:"onClickStarted($event)",click:"onClickStop($event)","window:popstate":"onPopState()","window:keydown.esc":"onEsc($event)"},properties:{"attr.aria-modal":"true","attr.aria-labelledby":"config.ariaLabelledBy","attr.aria-describedby":"config.ariaDescribedby"},classAttribute:"modal"},ngImport:n||(n=i.t(o,2)),template:"\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  ",isInline:!0,dependencies:[{kind:"directive",type:r.FocusTrapDirective,selector:"[focusTrap]",inputs:["cdkTrapFocus","cdkTrapFocusAutoCapture"],exportAs:["focusTrap"]}]}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:E,decorators:[{type:o.Component,args:[{selector:"modal-container",template:"\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  ",host:{class:"modal",role:"dialog",tabindex:"-1","[attr.aria-modal]":"true","[attr.aria-labelledby]":"config.ariaLabelledBy","[attr.aria-describedby]":"config.ariaDescribedby"}}]}],ctorParameters:function(){return[{type:h},{type:o.ElementRef},{type:o.Renderer2}]},propDecorators:{onClickStarted:[{type:o.HostListener,args:["mousedown",["$event"]]}],onClickStop:[{type:o.HostListener,args:["click",["$event"]]}],onPopState:[{type:o.HostListener,args:["window:popstate"]}],onEsc:[{type:o.HostListener,args:["window:keydown.esc",["$event"]]}]}});class I{constructor(e,t){this._isAnimated=!1,this._isShown=!1,this.element=e,this.renderer=t}get isAnimated(){return this._isAnimated}set isAnimated(e){this._isAnimated=e}get isShown(){return this._isShown}set isShown(e){this._isShown=e,e?this.renderer.addClass(this.element.nativeElement,`${f}`):this.renderer.removeClass(this.element.nativeElement,`${f}`),(0,s.isBs3)()||(e?this.renderer.addClass(this.element.nativeElement,`${b}`):this.renderer.removeClass(this.element.nativeElement,`${b}`))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,`${v}`),s.Utils.reflow(this.element.nativeElement)),this.isShown=!0}}I.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:I,deps:[{token:o.ElementRef},{token:o.Renderer2}],target:o["ɵɵFactoryTarget"].Component}),I.ɵcmp=o["ɵɵngDeclareComponent"]({minVersion:"14.0.0",version:"14.0.6",type:I,selector:"bs-modal-backdrop",host:{classAttribute:"modal-backdrop"},ngImport:n||(n=i.t(o,2)),template:" ",isInline:!0}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:I,decorators:[{type:o.Component,args:[{selector:"bs-modal-backdrop",template:" ",host:{class:u}}]}],ctorParameters:function(){return[{type:o.ElementRef},{type:o.Renderer2}]}});class M{constructor(e,t,i,n,s){this._element=e,this._renderer=i,this.onShow=new o.EventEmitter,this.onShown=new o.EventEmitter,this.onHide=new o.EventEmitter,this.onHidden=new o.EventEmitter,this._isShown=!1,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.timerHideModal=0,this.timerRmBackDrop=0,this.isNested=!1,this.clickStartedInContent=!1,this._backdrop=n.createLoader(e,t,i),this._config=s||m}set config(e){this._config=this.getConfig(e)}get config(){return this._config}get isShown(){return this._isShown}onClickStarted(e){this.clickStartedInContent=e.target!==this._element.nativeElement}onClickStop(e){const t=e.target===this._element.nativeElement&&!this.clickStartedInContent;!this.config.ignoreBackdropClick&&"static"!==this.config.backdrop&&t?(this.dismissReason=k,this.hide(e)):this.clickStartedInContent=!1}onEsc(e){this._isShown&&(27!==e.keyCode&&"Escape"!==e.key||e.preventDefault(),this.config.keyboard&&(this.dismissReason=S,this.hide()))}ngOnDestroy(){this._isShown&&(this._isShown=!1,this.hideModal(),this._backdrop.dispose())}ngOnInit(){this._config=this._config||this.getConfig(),setTimeout((()=>{this._config.show&&this.show()}),0)}toggle(){return this._isShown?this.hide():this.show()}show(){this.dismissReason=void 0,this.onShow.emit(this),this._isShown||(clearTimeout(this.timerHideModal),clearTimeout(this.timerRmBackDrop),this._isShown=!0,this.checkScrollbar(),this.setScrollbar(),s.document&&s.document.body&&(s.document.body.classList.contains(y)?this.isNested=!0:(this._renderer.addClass(s.document.body,y),this._renderer.setStyle(s.document.body,"overflow-y","hidden"))),this.showBackdrop((()=>{this.showElement()})))}hide(e){this._isShown&&(e&&e.preventDefault(),this.config.closeInterceptor?this.config.closeInterceptor().then((()=>this._hide()),(()=>{})):this._hide())}_hide(){this.onHide.emit(this),s.window.clearTimeout(this.timerHideModal),s.window.clearTimeout(this.timerRmBackDrop),this._isShown=!1,this._renderer.removeClass(this._element.nativeElement,f),(0,s.isBs3)()||this._renderer.removeClass(this._element.nativeElement,b),this._config.animated?this.timerHideModal=s.window.setTimeout((()=>this.hideModal()),300):this.hideModal()}getConfig(e){return Object.assign({},this._config,e)}showElement(){this._element.nativeElement.parentNode&&this._element.nativeElement.parentNode.nodeType===Node.ELEMENT_NODE||s.document&&s.document.body&&s.document.body.appendChild(this._element.nativeElement),this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","false"),this._renderer.setAttribute(this._element.nativeElement,"aria-modal","true"),this._renderer.setStyle(this._element.nativeElement,"display","block"),this._renderer.setProperty(this._element.nativeElement,"scrollTop",0),this._config.animated&&s.Utils.reflow(this._element.nativeElement),this._renderer.addClass(this._element.nativeElement,f),(0,s.isBs3)()||this._renderer.addClass(this._element.nativeElement,b);const e=()=>{this._config.focus&&this._element.nativeElement.focus(),this.onShown.emit(this)};this._config.animated?setTimeout(e,300):e()}hideModal(){this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","true"),this._renderer.setStyle(this._element.nativeElement,"display","none"),this.showBackdrop((()=>{this.isNested||(s.document&&s.document.body&&(this._renderer.removeClass(s.document.body,y),this._renderer.setStyle(s.document.body,"overflow-y","")),this.resetScrollbar()),this.resetAdjustments(),this.focusOtherModal(),this.onHidden.emit(this)}))}showBackdrop(e){if(!this._isShown||!this.config.backdrop||this.backdrop&&this.backdrop.instance.isShown)if(!this._isShown&&this.backdrop){this.backdrop.instance.isShown=!1;const t=()=>{this.removeBackdrop(),e&&e()};this.backdrop.instance.isAnimated?this.timerRmBackDrop=s.window.setTimeout(t,150):t()}else e&&e();else{if(this.removeBackdrop(),this._backdrop.attach(I).to("body").show({isAnimated:this._config.animated}),this.backdrop=this._backdrop._componentRef,!e)return;if(!this._config.animated)return void e();setTimeout(e,150)}}removeBackdrop(){this._backdrop.hide()}focusOtherModal(){if(null==this._element.nativeElement.parentElement)return;const e=this._element.nativeElement.parentElement.querySelectorAll(".in[bsModal]");e.length&&e[e.length-1].focus()}resetAdjustments(){this._renderer.setStyle(this._element.nativeElement,"paddingLeft",""),this._renderer.setStyle(this._element.nativeElement,"paddingRight","")}checkScrollbar(){this.isBodyOverflowing=s.document.body.clientWidth<s.window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){s.document&&(this.originalBodyPadding=parseInt(s.window.getComputedStyle(s.document.body).getPropertyValue("padding-right")||0,10),this.isBodyOverflowing&&(s.document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){s.document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const e=this._renderer.createElement("div");this._renderer.addClass(e,g),this._renderer.appendChild(s.document.body,e);const t=e.offsetWidth-e.clientWidth;return this._renderer.removeChild(s.document.body,e),t}}M.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:M,deps:[{token:o.ElementRef},{token:o.ViewContainerRef},{token:o.Renderer2},{token:a.ComponentLoaderFactory},{token:p,optional:!0}],target:o["ɵɵFactoryTarget"].Directive}),M.ɵdir=o["ɵɵngDeclareDirective"]({minVersion:"14.0.0",version:"14.0.6",type:M,selector:"[bsModal]",inputs:{config:"config",closeInterceptor:"closeInterceptor"},outputs:{onShow:"onShow",onShown:"onShown",onHide:"onHide",onHidden:"onHidden"},host:{listeners:{mousedown:"onClickStarted($event)",mouseup:"onClickStop($event)","keydown.esc":"onEsc($event)"}},exportAs:["bs-modal"],ngImport:n||(n=i.t(o,2))}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:M,decorators:[{type:o.Directive,args:[{selector:"[bsModal]",exportAs:"bs-modal"}]}],ctorParameters:function(){return[{type:o.ElementRef},{type:o.ViewContainerRef},{type:o.Renderer2},{type:a.ComponentLoaderFactory},{type:h,decorators:[{type:o.Optional},{type:o.Inject,args:[p]}]}]},propDecorators:{config:[{type:o.Input}],closeInterceptor:[{type:o.Input}],onShow:[{type:o.Output}],onShown:[{type:o.Output}],onHide:[{type:o.Output}],onHidden:[{type:o.Output}],onClickStarted:[{type:o.HostListener,args:["mousedown",["$event"]]}],onClickStop:[{type:o.HostListener,args:["mouseup",["$event"]]}],onEsc:[{type:o.HostListener,args:["keydown.esc",["$event"]]}]}});let D=1;class R{constructor(e,t,i){this.clf=t,this.modalDefaultOption=i,this.onShow=new o.EventEmitter,this.onShown=new o.EventEmitter,this.onHide=new o.EventEmitter,this.onHidden=new o.EventEmitter,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=e.createRenderer(null,null),this.config=i?Object.assign({},m,i):m}show(e,t){this.modalsCount++,this._createLoaders();const i=t?.id||D++;return this.config=this.modalDefaultOption?Object.assign({},m,this.modalDefaultOption,t):Object.assign({},m,t),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(e)}hide(e){1!==this.modalsCount&&null!=e||(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=e?this.modalsCount-1:0,setTimeout((()=>{this._hideModal(e),this.removeLoaders(e)}),this.config.animated?w:0)}_showBackdrop(){const e=!0===this.config.backdrop||"static"===this.config.backdrop,t=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),e&&t&&(this._backdropLoader.attach(I).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){if(!this.backdropRef)return;this.backdropRef.instance.isShown=!1;const e=this.config.animated?w:0;setTimeout((()=>this.removeBackdrop()),e)}_showModal(e){const t=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const e of this.config.providers)t.provide(e);const i=new c,n=t.provide({provide:h,useValue:this.config}).provide({provide:c,useValue:i}).attach(E).to("body");return i.hide=()=>n.instance?.hide(),i.setClass=e=>{n.instance&&(n.instance.config.class=e)},i.onHidden=new o.EventEmitter,i.onHide=new o.EventEmitter,this.copyEvent(t.onBeforeHide,i.onHide),this.copyEvent(t.onHidden,i.onHidden),n.show({content:e,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),n.instance&&(n.instance.level=this.getModalsCount(),i.content=t.getInnerComponent(),i.id=n.instance.config?.id),i}_hideModal(e){if(null!=e){const t=this.loaders.findIndex((t=>t.instance?.config.id===e)),i=this.loaders[t];i&&i.hide(e)}else this.loaders.forEach((e=>{e.instance&&e.hide(e.instance.config.id)}))}getModalsCount(){return this.modalsCount}setDismissReason(e){this.lastDismissReason=e}removeBackdrop(){this._renderer.removeClass(document.body,y),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){document&&(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const e=this._renderer.createElement("div");this._renderer.addClass(e,g),this._renderer.appendChild(document.body,e);const t=e.offsetWidth-e.clientWidth;return this._renderer.removeChild(document.body,e),t}_createLoaders(){const e=this.clf.createLoader();this.copyEvent(e.onBeforeShow,this.onShow),this.copyEvent(e.onShown,this.onShown),this.copyEvent(e.onBeforeHide,this.onHide),this.copyEvent(e.onHidden,this.onHidden),this.loaders.push(e)}removeLoaders(e){if(null!=e){const t=this.loaders.findIndex((t=>t.instance?.config.id===e));t>=0&&(this.loaders.splice(t,1),this.loaders.forEach(((e,t)=>{e.instance&&(e.instance.level=t+1)})))}else this.loaders.splice(0,this.loaders.length)}copyEvent(e,t){e.subscribe((e=>{t.emit(this.lastDismissReason||e)}))}}R.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:R,deps:[{token:o.RendererFactory2},{token:a.ComponentLoaderFactory},{token:p,optional:!0}],target:o["ɵɵFactoryTarget"].Injectable}),R.ɵprov=o["ɵɵngDeclareInjectable"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:R,providedIn:"platform"}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:R,decorators:[{type:o.Injectable,args:[{providedIn:"platform"}]}],ctorParameters:function(){return[{type:o.RendererFactory2},{type:a.ComponentLoaderFactory},{type:h,decorators:[{type:o.Optional},{type:o.Inject,args:[p]}]}]}});r.FocusTrapModule.forRoot();class B{static forRoot(){return{ngModule:B,providers:[R,a.ComponentLoaderFactory,d.PositioningService]}}static forChild(){return{ngModule:B,providers:[R,a.ComponentLoaderFactory,d.PositioningService]}}}B.ɵfac=o["ɵɵngDeclareFactory"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:B,deps:[],target:o["ɵɵFactoryTarget"].NgModule}),B.ɵmod=o["ɵɵngDeclareNgModule"]({minVersion:"14.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:B,declarations:[I,M,E],imports:[r.FocusTrapModule],exports:[I,M]}),B.ɵinj=o["ɵɵngDeclareInjector"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:B,imports:[r.FocusTrapModule]}),o["ɵɵngDeclareClassMetadata"]({minVersion:"12.0.0",version:"14.0.6",ngImport:n||(n=i.t(o,2)),type:B,decorators:[{type:o.NgModule,args:[{imports:[r.FocusTrapModule],declarations:[I,M,E],exports:[I,M]}]}]})}}]);