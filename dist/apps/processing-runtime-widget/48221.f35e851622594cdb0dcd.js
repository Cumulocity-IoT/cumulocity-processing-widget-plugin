(self.webpackChunkcumulocity_processing_widget_plugin=self.webpackChunkcumulocity_processing_widget_plugin||[]).push([[48221],{48221:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(65038),t)},58994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const r=n(89565),i=n(70602);class s{constructor(e,t){const n=new i.FetchClient(e,t);this.realtime=new r.Realtime(n),this.alarm=new i.AlarmService(n,this.realtime),this.application=new i.ApplicationService(n,this.realtime),this.audit=new i.AuditService(n),this.core=n,this.deviceRegistration=new i.DeviceRegistrationService(n),this.deviceRegistrationBulk=new i.DeviceRegistrationBulkService(n),this.event=new i.EventService(n,this.realtime),this.inventory=new i.InventoryService(n,this.realtime),this.inventoryBinary=new i.InventoryBinaryService(n),this.inventoryRole=new i.InventoryRoleService(n),this.measurement=new i.MeasurementService(n,this.realtime),this.operation=new i.OperationService(n),this.operationBulk=new i.OperationBulkService(n),this.options={security:new i.TenantSecurityOptionsService(n),system:new i.SystemOptionsService(n),login:new i.TenantLoginOptionsService(n),tenant:new i.TenantOptionsService(n)},this.role=new i.InventoryRoleService(n),this.tenant=new i.TenantService(n),this.user=new i.UserService(n),this.userGroup=new i.UserGroupService(n),this.userRole=new i.UserRoleService(n),this.identity=new i.IdentityService(n),this.smartGroups=new i.SmartGroupsService(n),this.smartRules=new i.SmartRulesService(n)}static async authenticate(e,t){const n=new i.BasicAuth(e),r=new i.FetchClient(n,t),o=await r.fetch("/tenant/currentTenant",{method:"GET"});if(200!==o.status)throw{res:o};const{name:a}=await o.json(),c=new s(n,t);return c.core.tenant=a,c}static async deviceBootstrap(e){const{deviceId:t,timeout:n,baseUrl:r,basicAuthToken:o}=e;let{expire:a}=e;n&&!a&&(a=Date.now()+n);const c=new i.FetchClient(void 0,r),u=new i.DeviceRegistrationService(c);let l;try{const{data:e}=await u.bootstrap(t,{basicAuthToken:o}),{username:n,password:a,tenantId:c}=e,d=new i.BasicAuth({user:n,tenant:c,password:a});l=new s(d,r),l.core.tenant=c}catch(t){if((!a||Date.now()<a)&&404===t.res.status)return s.deviceBootstrap(Object.assign({expire:a},e));throw t}return l}static async getMicroserviceSubscriptions(e,t){const n=new i.FetchClient(new i.BasicAuth(e),t),r=await n.fetch("/application/currentApplication/subscriptions"),{users:s}=await r.json();return s.map((({tenant:e,name:t,password:n})=>({tenant:e,user:t,password:n})))}setAuth(e){this.core.setAuth(e),this.realtime.disconnect()}}t.Client=s},21303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlarmService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="alarm",this.listUrl="alarms",this.propertyName="alarms",this.channel="/alarms/*"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}}t.AlarmService=i},64575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlarmStatus=void 0;const r=n(11950);!function(e){e[e.ACKNOWLEDGED=(0,r.gettext)("ACKNOWLEDGED")]="ACKNOWLEDGED",e[e.CLEARED=(0,r.gettext)("CLEARED")]="CLEARED",e[e.ACTIVE=(0,r.gettext)("ACTIVE")]="ACTIVE"}(t.AlarmStatus||(t.AlarmStatus={}))},33912:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55916:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(21303),t),i(n(64575),t),i(n(33912),t)},12327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationAvailability=void 0;const r=n(11950);!function(e){e[e.MARKET=(0,r.gettext)("MARKET")]="MARKET",e[e.PRIVATE=(0,r.gettext)("PRIVATE")]="PRIVATE",e[e.SHARED=(0,r.gettext)("SHARED")]="SHARED"}(t.ApplicationAvailability||(t.ApplicationAvailability={}))},85764:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationBinaryService=void 0;const i=n(91619),s=r(n(6230));class o extends i.Service{constructor(e,t){super(e),this.listUrl="binaries",this.propertyName="attachments",this.baseUrl=`application/applications/${this.getIdString(t)}`}async upload(e,t,n){const r=n?.listUrl||this.listUrl,i=this.createBinaryRequestBody(e,t,n);let s;"function"==typeof i.getHeaders&&(s=i.getHeaders());const o=Object.assign(n?.headers||{Accept:"application/json"},s),a=await this.fetch(r,{method:"POST",body:i,headers:o}),c=await a.json();return{res:a,data:c}}uploadWithProgressXhr(e,t,n,r){const i=`/${this.baseUrl}/${r?.listUrl||this.listUrl}`,s=this.createBinaryRequestBody(e,n,r);let o;"function"==typeof s.getHeaders&&(o=s.getHeaders());const a=this.client.getFetchOptions().headers;Object.assign(a,r?.headers||{Accept:"application/json"}),Object.assign(a,o);const c=new XMLHttpRequest;c.open("POST",i,!0);for(const e in a)a.hasOwnProperty(e)&&c.setRequestHeader(e,a[e]);return c.upload.addEventListener("progress",t),c.send(s),c}getXMLHttpResponse(e){return new Promise(((t,n)=>{e.addEventListener("loadend",(()=>{4!==e.readyState||200!==e.status&&201!==e.status?n(e.responseText?{data:JSON.parse(e.responseText)}:"Could not upload file."):t(JSON.parse(e.responseText))}))}))}async list(e){return super.list(e)}async delete(e){return super.delete(e)}async listPlugins(){const e=`${this.listUrl}/plugins`,t=await this.fetch(e,{headers:{accept:"application/json"}}),n=await t.json();return{res:t,data:n}}async addPlugin(e,t){const n=`${this.listUrl}/plugins/${encodeURIComponent(e)}`,r=new s.default,i=t instanceof ArrayBuffer?Buffer.from(t):t;let o;r.append("file",i),"function"==typeof r.getHeaders&&(o=r.getHeaders());const a=Object.assign({accept:"application/json"},o),c=await this.fetch(n,{method:"POST",body:r,headers:a}),u=await c.json();return{res:c,data:u}}async removePlugin(e){const t=`${this.listUrl}/plugins/${e}`,n=await this.fetch(t,{method:"DELETE",headers:{accept:"application/json"}}),r=await n.json();return{res:n,data:r}}async updateFiles(e){const t=`${this.listUrl}/files`,n=new s.default;let r;e.forEach((e=>{const t=e.contents instanceof ArrayBuffer?Buffer.from(e.contents):e.contents;n.append(e.path,t)})),"function"==typeof n.getHeaders&&(r=n.getHeaders());const i=Object.assign({accept:"application/json"},r),o=await this.fetch(t,{method:"POST",body:n,headers:i}),a=await o.json();return{res:o,data:a}}async downloadArchive(e){const t=`${this.listUrl}/${e}`;return await this.fetch(t)}createBinaryRequestBody(e,t,n){const r=new s.default,i=e instanceof ArrayBuffer?Buffer.from(e):e;let o=t;if("undefined"!=typeof File&&e instanceof File&&(o=e.name),r.append(n?.bodyFileProperty||"file",i,o),r.append("fileName",o),n?.requestBody)for(const e in n.requestBody)n.requestBody.hasOwnProperty(e)&&r.append(e,JSON.stringify(n.requestBody[e]));return r}}t.ApplicationBinaryService=o},72780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationService=void 0;const r=n(91619),i=n(82156),s=n(98463),o=n(27445),a=n(85764),c=n(80678),u=n(11950);class l extends r.Service{constructor(){super(...arguments),this.baseUrl="application",this.listUrl="applications",this.propertyName="applications",this.channel="/applications/*"}async create(e){return super.create(e)}async clone(e){const t=`${this.getDetailUrl(e)}/clone`,n=await this.fetch(t,{method:"POST",body:"",headers:{"content-type":"application/json",accept:"application/json"}}),r=await n.json();return{res:n,data:r}}async list(e={}){return super.list(e)}async listVersions(e,t={}){const n=this.getEntityId(e),r=`${this.listUrl}/${n}/versions`,i={"content-type":"application/json"};try{const e=await this.fetch(r,{headers:i,params:t}),n=(await e.json())?.applicationVersions;return{res:e,data:n}}catch(t){if(404===t.res.status){const{data:t,res:n}=await this.detail(e);return{res:n,data:t.applicationVersions}}throw t}}async detail(e){return super.detail(e)}async update(e){return super.update(e)}async delete(e){return super.delete(e)}async listByName(e){const t=`applicationsByName/${encodeURIComponent(e)}`,n=await this.fetch(t,{headers:{"content-type":"application/json"}}),r=await n.json();return{res:n,data:r[this.propertyName]}}async listByTenant(e,t={}){const n=new s.TenantService(this.client),r=this.getIdString(e||(await n.current()).data.name),i=`applicationsByTenant/${encodeURIComponent(r)}`,o=await this.fetch(i,{headers:{"content-type":"application/json"},params:t}),a=await o.json();return{res:o,data:a[this.propertyName]}}async listByOwner(e,t={}){const n=new s.TenantService(this.client),r=this.getIdString(e||(await n.current()).data.name),i=`applicationsByOwner/${encodeURIComponent(r)}`,o=await this.fetch(i,{headers:{"content-type":"application/json"},params:t}),a=await o.json();return{res:o,data:a[this.propertyName]}}async listByUser(e,t={}){const n=new o.UserService(this.client),r=this.getIdString(e||(await n.current()).data),i=`applicationsByUser/${encodeURIComponent(r)}`,s=await this.fetch(i,{headers:{"content-type":"application/json"},params:t}),a=await s.json();return{res:s,data:a[this.propertyName]}}async reactivateArchive(e){const t=`${this.listUrl}/${e}/refresh`;return{res:await this.fetch(t,{method:"POST",body:"",headers:{"content-type":"application/json",accept:"application/json"}}),data:null}}binary(e){return new a.ApplicationBinaryService(this.client,e)}getHref(e){return e.type===c.ApplicationType.EXTERNAL?e.externalUrl:`/apps/${e.public?"public/":""}${e.contextPath}`}async isAvailable(e){const{res:t,data:n}=await this.listByUser(void 0,{dropOverwrittenApps:!0,noPaging:!0});return{data:(n||[]).some((t=>"string"==typeof e?t.name===e||t.contextPath===e:this.isMatch(t,e))),res:t}}async getStatusDetails(e){const t=this.getEntityId(e);return new i.InventoryService(this.client,this.realtime).list({type:`c8y_Application_${t}`})}getInstanceNames(e){let t=new Array;return e&&e.c8y_Status&&e.c8y_Status.instances&&(t=Object.keys(e.c8y_Status.instances)),t}async getInstanceLog(e,t,n){const r=`${this.getDetailUrl(e)}/logs/${t}`,i={accept:this.mimeType("applicationLogs")},s=await this.fetch(r,{headers:i,params:n}),o=await s.json();return{res:s,data:o}}async updateApplicationConfig(e,t){const n=this.getEntityId(e),{data:r}=await this.detail(n),i={...r?.config||{},...t},s=await this.update({id:n,config:i});return(await s)?.data}async getAppManifest(e,t){const n=new Date;let r;if(r=t?await this.client.fetch(`/apps/${e.contextPath}@${t}/cumulocity.json?nocache=${n.getTime()}`):await this.client.fetch(`/apps/${e.contextPath}/cumulocity.json?nocache=${n.getTime()}`),r.status>=400)throw new Error((0,u.gettext)("No Cumulocity IoT manifest found."));return await r.json()}async storeAppManifest(e,t){return await this.binary(e).updateFiles([{path:"cumulocity.json",contents:JSON.stringify(t)}])}async setPackageVersionTag(e,t,n){const r=`${this.getDetailUrl(e)}/versions/${t}`,i=JSON.stringify({tags:n}),s=await this.fetch(r,{method:"PUT",body:i,headers:{accept:"application/vnd.com.nsn.cumulocity.applicationVersion+json;charset=UTF-8;ver=0.9","content-type":"application/json"}}),o=await s.json();return{res:s,data:o}}async deleteVersionPackage(e,t){const n=`${this.getDetailUrl(e)}/versions/`;return{res:await this.fetch(n,this.changeFetchOptions({method:"DELETE",params:t},n)),data:null}}async updateApplicationAvailability(e,t){const n=this.getEntityId(e);return await this.update({id:n,availability:t})}isMatch(e,t){return Object.keys(t).every((n=>Array.isArray(e[n])&&Array.isArray(t[n])?t[n].every((t=>e[n].includes(t))):"object"==typeof e[n]&&null!==e[n]&&"object"==typeof t[n]&&null!==t[n]?this.isMatch(e[n],t[n]):e[n]===t[n]))}}t.ApplicationService=l},80678:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationType=void 0,function(e){e.EXTERNAL="EXTERNAL",e.HOSTED="HOSTED",e.MICROSERVICE="MICROSERVICE",e.FEATURE="FEATURE",e.REPOSITORY="REPOSITORY"}(t.ApplicationType||(t.ApplicationType={}))},99535:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingMode=void 0,function(e){e.SUBSCRIPTION="SUBSCRIPTION",e.RESOURCES="RESOURCES"}(t.BillingMode||(t.BillingMode={}))},56762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8813:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},62680:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceStatus=void 0,function(e){e.Up="Up",e.Unhealthy="Unhealthy",e.Down="Down",e.Unknown="Unknown"}(t.InstanceStatus||(t.InstanceStatus={}))},11824:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},59716:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},79236:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27126:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},60565:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9978:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},64824:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Isolation=void 0,function(e){e.PER_TENANT="PER_TENANT",e.MULTI_TENANT="MULTI_TENANT"}(t.Isolation||(t.Isolation={}))},40109:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(72780),t),i(n(56762),t),i(n(8813),t),i(n(62680),t),i(n(11824),t),i(n(80678),t),i(n(99535),t),i(n(64824),t),i(n(12327),t),i(n(27126),t),i(n(60565),t),i(n(9978),t),i(n(59716),t),i(n(79236),t)},35070:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuditRecordType=void 0,function(e){e.ALARM="Alarm",e.BULK_OPERATION="BulkOperation",e.CEP_MODULE="CepModule",e.EVENT="Event",e.INVENTORY="Inventory",e.INVENTORY_ROLE="InventoryRole",e.OPERATION="Operation",e.OPTION="Option",e.GROUP="Group",e.SMART_RULE="SmartRule",e.SYSTEM="SYSTEM",e.TENANT="Tenant",e.USER="User"}(t.AuditRecordType||(t.AuditRecordType={}))},7607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuditService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="audit",this.listUrl="auditRecords",this.propertyName="auditRecords"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async list(e={}){return super.list(e)}}t.AuditService=i},8580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeType=void 0;const r=n(11950);!function(e){e[e.ADDED=(0,r.gettext)("ADDED")]="ADDED",e[e.REPLACED=(0,r.gettext)("REPLACED")]="REPLACED",e[e.REMOVED=(0,r.gettext)("REMOVED")]="REMOVED"}(t.ChangeType||(t.ChangeType={}))},77174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},17526:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28887:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7607),t),i(n(77174),t),i(n(35070),t),i(n(17526),t),i(n(8580),t)},38609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicAuth=void 0;const r=n(24692);var i=new WeakMap;t.BasicAuth=class{constructor(e){this.updateCredentials(e)}updateCredentials({tenant:e,user:t,password:n,token:s,tfa:o}={}){const a=i.get(this)||{};return t&&e&&(t=`${e}/${t}`),t=t||this.user,n=n||a.password,!s&&t&&n&&(s=(0,r.btoa)(`${t}:${n}`)),t&&(this.user=t),s=s||a.token,o=o||a.tfa,i.set(this,{tfa:o,token:s,password:n}),s}getFetchOptions(e){const t=i.get(this),{token:n,tfa:r}=t,s=this.getCookieValue("XSRF-TOKEN"),o={Authorization:`Basic ${n||""}`,...s?{"X-XSRF-TOKEN":s}:void 0};return r&&(o.tfatoken=r),e.headers=Object.assign(o,e.headers),e}getCometdHandshake(e={}){const t=i.get(this),{token:n,tfa:r}=t,s="com.cumulocity.authn",o=e.ext=e.ext||{};return o[s]=Object.assign(o[s]||{},{token:n,tfa:r}),e}logout(){delete this.user,i.set(this,{})}getCookieValue(e){try{const t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():void 0}catch(e){return}}}},84234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CookieAuth=void 0;const r=n(49071);t.CookieAuth=class{constructor(){this.logoutUrl="user/logout"}updateCredentials({user:e}={}){this.user=e}getFetchOptions(e){const t={"X-XSRF-TOKEN":this.getCookieValue("XSRF-TOKEN")};return e.headers=Object.assign(t,e.headers),e}getCometdHandshake(e={}){const t="com.cumulocity.authn",n=this.getCookieValue("XSRF-TOKEN"),r=e.ext=e.ext||{};return r[t]=Object.assign(r[t]||{},{xsrfToken:n}),e}async logout(){this.user&&delete this.user;const e=new r.FetchClient;e.setAuth(this);const t=JSON.stringify({});return e.fetch(this.logoutUrl,{headers:{"content-type":"application/json",accept:"application/json"},body:t,method:"POST"})}getCookieValue(e){const t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}}},49071:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchClient=void 0;const i=r(n(54098));let s=new WeakMap;t.FetchClient=class{constructor(e,t){this.baseUrl=t,this.tenant="",this.defaultHeaders={},"string"==typeof e?t=e:this.setAuth(e),this.baseUrl=this.resolveServerUrl(t)}setAuth(e){s.set(this,e)}async fetch(e,t){let n=i.default;try{n=window.fetch||n}catch(e){}return n(this.getUrl(e,t),this.getFetchOptions(t))}getUrl(e="",t){const n=t&&t.params;let r="";n&&Object.keys(n).length&&(r=Object.keys(n).map((e=>{let t=n[e];const r=encodeURIComponent(e);return Array.isArray(t)||(t=[t]),t.map((e=>`${r}=${encodeURIComponent(e)}`)).join("&")})).join("&"),r=`?${r}`);return`${this.baseUrl.replace(/\/+$/,"").replace(/^\/+/,"")}/${e.replace(/\/+$/,"").replace(/^\/+/,"")}${r}`}getFetchOptions(e={}){let t={...e};const n=s.get(this);return t.headers=Object.assign({},this.defaultHeaders,t.headers,{UseXBasic:!0}),delete t.params,t=n?n.getFetchOptions(t):t,t}getCometdHandshake(e={}){const t=s.get(this);return t?t.getCometdHandshake(e):e}resolveServerUrl(e=""){if(e&&e.startsWith("http"))return e.replace(/\/+$/,"");try{const t=window.location;return`${t.protocol}//${t.host}/${e.replace(/\/+$/,"")}`}catch(e){throw Error("Your environment does not support relative URLs. Please provide a base URL.")}}}},18122:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},99475:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18918:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28356:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8333:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},95472:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},61989:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},35235:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53299:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},23602:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8891:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16549:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},73557:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicroserviceClientRequestAuth=void 0;t.MicroserviceClientRequestAuth=class{constructor(e={}){this.xsrfToken=this.getCookieValue(e,"XSRF-TOKEN"),this.authTokenFromCookie=this.getCookieValue(e,"authorization"),this.authTokenFromHeader=e.authorization}updateCredentials(){}getFetchOptions(e){const t={Authorization:this.authTokenFromCookie?`Bearer ${this.authTokenFromCookie}`:this.authTokenFromHeader,...this.xsrfToken?{"X-XSRF-TOKEN":this.xsrfToken}:void 0};return e.headers=Object.assign(t,e.headers),e}getCometdHandshake(e={}){const t="com.cumulocity.authn",n=this.xsrfToken;let r=this.authTokenFromCookie;!r&&this.authTokenFromHeader&&(r=this.authTokenFromHeader.replace("Basic ","").replace("Bearer ",""));const i=e.ext=e.ext||{};return i[t]=Object.assign(i[t]||{},{token:r,...n?{xsrfToken:n}:void 0}),e}logout(){this.authTokenFromCookie&&delete this.authTokenFromCookie,this.authTokenFromHeader&&delete this.authTokenFromHeader,this.xsrfToken&&delete this.xsrfToken}getCookieValue(e,t){try{const n=e&&e.cookie&&e.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return n?n.pop():void 0}catch(e){return}}}},21830:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Paging=void 0;t.Paging=class{constructor(e,t,n){this.filter=n,this.service=e,this.currentPage=t.currentPage,this.nextPage=t.nextPage,this.prevPage=t.prevPage,this.pageSize=t.pageSize,this.totalPages=t.totalPages}async next(e={}){return this.list(this.getFilter(e,this.nextPage))}async prev(e={}){return this.list(this.getFilter(e,this.prevPage))}async list(e={}){return this.service.list(e)}async goto(e,t={}){return this.list(this.getFilter(t,e))}getFilter(e,t){return Object.assign(e,this.filter,{currentPage:t})}}},68266:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueriesUtil=void 0;t.QueriesUtil=class{constructor(){this.operatorFns={__not:e=>`not(${this.buildQueryFilter(e,null)})`,__and:e=>this.buildQueryFilter(e,null,"and"),__or:e=>this.buildQueryFilter(e,null,"or"),__eq:(e,t)=>"object"==typeof e&&null!==e?this.buildQueryFilter(e,t):`${t} eq ${this.quoteString(e)}`,__gt:(e,t)=>`${t} gt ${this.quoteString(e)}`,__ge:(e,t)=>`${t} ge ${this.quoteString(e)}`,__lt:(e,t)=>`${t} lt ${this.quoteString(e)}`,__le:(e,t)=>`${t} le ${this.quoteString(e)}`,__in:(e,t)=>{const n=e.filter((e=>!!e)).map((e=>`${t} eq ${this.quoteString(e)}`));return this.glue(n,"or")},__bygroupid:e=>`bygroupid(${e})`,__has:e=>`has(${e})`,__useFilterQueryString:e=>{const t=e.match(/\(.*\)/)[0];return t.substring(1,t.length-1)}}}buildQuery(e){const t=[],n=this.buildQueryFilter(e.__filter||e),r=this.buildQueryOrderby(e.__orderby);return n&&t.push(`$filter=(${n})`),r&&t.push(`$orderby=${r}`),t.join(" ")}buildQueryFilter(e,t,n){const r=t||null,i=n||"and",s=[];if(Array.isArray(e))e.forEach((e=>{const t=this.buildQueryFilter(e,null,i);t&&s.push(t)}));else{let t;Object.keys(e).forEach((n=>{void 0!==this.operatorFns[n]?(t=this.operatorFns[n](e[n],r),t&&s.push(t)):(t=this.operatorFns.__eq(e[n],n),t&&s.push(t))}))}return this.glue(s,i)}buildQueryOrderby(e){const t=[];return e&&e.forEach((e=>{Object.keys(e).forEach((n=>{0!==e[n]&&t.push(`${n} ${e[n]>0?"asc":"desc"}`)}))})),t.join(",")}addAndFilter(e,t){return this.addFilter(e,t,"and")}addOrFilter(e,t){return this.addFilter(e,t,"or")}addFilter(e,t,n){const r=e.__orderby?e.__filter||{}:e.__filter||e,i={[`__${n}`]:this.skipEmptyObjects([r,t])};return e.__filter||e.__orderby?(e.__filter=i,e):i}prependOrderbys(e,t){return this.addOrderbys(e,t,"prepend")}appendOrderbys(e,t){return this.addOrderbys(e,t,"append")}addOrderbys(e,t,n){const r=e.__orderby?e.__filter||{}:e.__filter||e,i=e.__orderby||[],s="prepend"===n?[...t,...i]:[...i,...t],o={__orderby:this.skipEmptyObjects(s)};return this.isEmptyObject(r)||(o.__filter=r),o}glue(e,t){return e.length>1?`(${e.join(`) ${t} (`)})`:e[0]}quoteString(e){return"string"==typeof e?`'${e}'`:e}skipEmptyObjects(e){return e.filter((e=>!this.isEmptyObject(e)))}isEmptyObject(e){return 0===Object.keys(e).length}}},77366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;const r=n(21830);t.Service=class{constructor(e,t){this.client=e,this.realtime=t,this.cache=new Map;const n=Object.getPrototypeOf(this);["list","create","update","detail","delete"].forEach((e=>{n.hasOwnProperty(e)||Object.defineProperty(this,e,{get(){}})}))}async list(e={}){const t=this.listUrl,n=await this.fetch(t,this.changeFetchOptions({headers:{accept:"application/json"},params:e},t)),r=await n.json();return{res:n,data:this.propertyName?r[this.propertyName]:r,paging:this.getPaging(r,e)}}async detail(e,t={}){const n=this.getDetailUrl(e),r=await this.fetch(n,this.changeFetchOptions({headers:{accept:"application/json"},params:{...t}},n)),i=await r.json();return{res:r,data:i}}async create(e){const t=this.listUrl,n=JSON.stringify(this.onBeforeCreate(e)),r=await this.fetch(t,this.changeFetchOptions({method:"POST",body:n,headers:{"content-type":"application/json",accept:"application/json"}},t)),i=await r.json();return{res:r,data:i}}async update(e){const t=this.getDetailUrl(e),n=JSON.stringify(this.onBeforeUpdate(e)),r=await this.fetch(t,this.changeFetchOptions({method:"PUT",body:n,headers:{"content-type":"application/json",accept:"application/json"}},t)),i=await r.json();return{res:r,data:i}}async delete(e,t){const n=this.getDetailUrl(e);return{res:await this.fetch(n,this.changeFetchOptions({method:"DELETE",params:t},n)),data:null}}onBeforeCreate(e){return delete e.id,e}onBeforeUpdate(e){return e}changeFetchOptions(e,t=""){return e}getUrl(e=""){return`${this.baseUrl.replace(/\/+$/,"")}/${e.replace(/^\/+/,"")}`}getEntityId(e){return null==e?"":"object"==typeof e?this.getEntityId(e.id):`${e}`}getDetailUrl(e){const t=this.getEntityId(e);return`${this.listUrl}/${t}`}async fetch(e,t){const n=this.getUrl(e),r=await this.client.fetch(n,t);return await this.handleErrorStatusCodes(r)}async handleErrorStatusCodes(e){if(e.status>=400){let t=null;try{t=await e.json()}catch(n){try{t=await e.text()}catch(e){}}throw{res:e,data:t}}return e}mimeType(e){return`application/vnd.com.nsn.cumulocity.${e}+json`}getIdString(e){let t;return t="object"==typeof e?e.id:e,String(t)}getPaging(e,t){if(e.statistics){const n={...e.statistics,nextPage:this.getCurrentPageFromLink(e.next),prevPage:this.getCurrentPageFromLink(e.prev)};return new r.Paging(this,n,t)}return null}getCurrentPageFromLink(e=""){const t=e.match(/currentPage=(-{0,1}\d+)/);return t&&parseInt(t[1],10)}}},97646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Severity=void 0;const r=n(11950);!function(e){e[e.CRITICAL=(0,r.gettext)("CRITICAL")]="CRITICAL",e[e.MAJOR=(0,r.gettext)("MAJOR")]="MAJOR",e[e.MINOR=(0,r.gettext)("MINOR")]="MINOR",e[e.WARNING=(0,r.gettext)("WARNING")]="WARNING"}(t.Severity||(t.Severity={}))},91619:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(77366),t),i(n(49071),t),i(n(18122),t),i(n(38609),t),i(n(84234),t),i(n(73557),t),i(n(61989),t),i(n(53299),t),i(n(23602),t),i(n(8891),t),i(n(8333),t),i(n(95472),t),i(n(28356),t),i(n(35235),t),i(n(21830),t),i(n(16549),t),i(n(97646),t),i(n(99475),t),i(n(18918),t),i(n(68266),t)},40323:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceRegistrationBulkService=void 0;const i=r(n(6230));t.DeviceRegistrationBulkService=class{constructor(e){this.client=e}async create(e){let t=e;const n=new i.default;let r,s="bulk-registration.csv";if("undefined"!=typeof File&&t instanceof File){s=t.name;const e=/\.csv$/;t.name.match(e)&&(t=new File([t],t.name,{type:"text/csv"}))}n.append("file",t,s),"function"==typeof n.getHeaders&&(r=n.getHeaders());const o=Object.assign({accept:"application/json"},r),a=await this.client.fetch("/devicecontrol/bulkNewDeviceRequests",{method:"POST",body:n,headers:o}),c=await a.json();return{res:a,data:c}}}},82944:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceRegistrationSecurityMode=void 0,function(e){e.REQUIRED="REQUIRED",e.OPTIONAL="OPTIONAL",e.IGNORED="IGNORED"}(t.DeviceRegistrationSecurityMode||(t.DeviceRegistrationSecurityMode={}))},8024:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceRegistrationService=void 0;const r=n(24692),i=n(91619),s=n(73485);class o extends i.Service{constructor(){super(...arguments),this.baseUrl="devicecontrol",this.listUrl="newDeviceRequests",this.propertyName="newDeviceRequests"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}async accept(e){const t=this.getSecurityToken(e);let n={id:this.getIdString(e),status:s.DeviceRegistrationStatus.ACCEPTED};return t&&(n={...n,securityToken:t}),super.update(n)}async acceptAll(){const e=await super.fetch(`${this.listUrl}/acceptAll`,{method:"POST"}),t=await e.json();return{res:e,data:t}}async limit(){const e=await super.fetch(`${this.listUrl}/limit`),t=await e.json();return{res:e,data:t}}async bootstrap(e,t){const n=this.getIdString(e),i=this.getSecurityToken(e),s=i?JSON.stringify({id:n,securityToken:i}):JSON.stringify({id:n}),o=`${this.baseUrl}/deviceCredentials`,{basicAuth:a}=t;let{basicAuthToken:c}=t;if(a){const{user:e,pass:t}=a;c=(0,r.btoa)(`${e}:${t}`)}const u={Authorization:`Basic ${c}`,accept:"application/json","content-type":"application/json"},l=await this.client.fetch(o,{body:s,headers:u,method:"POST"}),d=await l.json();if(l.status>400)throw{res:l,data:d};return{res:l,data:d}}onBeforeCreate(e){return e}onBeforeUpdate(e){const t=Object.assign({},e);return delete t.id,t}getDetailUrl(e){const t=encodeURIComponent(this.getEntityId(e));return`${this.listUrl}/${t}`}getSecurityToken(e){let t;return"object"==typeof e&&(t=e.securityToken?String(e.securityToken):void 0),t}}t.DeviceRegistrationService=o},73485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceRegistrationStatus=void 0;const r=n(11950);!function(e){e[e.WAITING_FOR_CONNECTION=(0,r.gettext)("WAITING_FOR_CONNECTION")]="WAITING_FOR_CONNECTION",e[e.PENDING_ACCEPTANCE=(0,r.gettext)("PENDING_ACCEPTANCE")]="PENDING_ACCEPTANCE",e[e.ACCEPTED=(0,r.gettext)("ACCEPTED")]="ACCEPTED",e[e.BLOCKED=(0,r.gettext)("BLOCKED")]="BLOCKED"}(t.DeviceRegistrationStatus||(t.DeviceRegistrationStatus={}))},19033:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29057:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},20603:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},96875:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8024),t),i(n(40323),t),i(n(29057),t),i(n(20603),t),i(n(19033),t),i(n(73485),t),i(n(82944),t)},48383:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventBinaryService=void 0;const i=r(n(6230)),s=n(91619);class o extends s.Service{constructor(){super(...arguments),this.baseUrl="event",this.listUrl="events"}async upload(e,t){const n=this.getDetailUrl(t),r=new i.default;r.append("file",e);const s=await this.fetch(n,{method:"POST",body:r,headers:{accept:"application/json"}}),o=await s.json();return{res:s,data:o}}async download(e){const t=this.getDetailUrl(e);return await this.fetch(t)}async delete(e){return super.delete(e)}getDetailUrl(e){let t;return t="object"==typeof e&&e.id?e.id:e,`${this.listUrl}/${t}/binaries`}}t.EventBinaryService=o},77359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="event",this.listUrl="events",this.propertyName="events",this.channel="/events/*"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}}t.EventService=i},48565:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18497:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},31939:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(77359),t),i(n(48383),t),i(n(48565),t),i(n(18497),t)},11950:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gettext=void 0;t.gettext=e=>e},42426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27982:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityService=void 0;t.IdentityService=class{constructor(e){this.baseUrl="identity",this.propertyName="externalIds",this.client=e}async list(e){const t=this.getExternalIdsOfGlobalIdUrl(e),n=await this.fetch(t,{headers:{accept:"application/json"}}),r=await n.json();return{res:n,data:r[this.propertyName]}}async create(e){const t=JSON.stringify(e),n=this.getExternalIdsOfGlobalIdUrl(e.managedObject.id),r=await this.fetch(n,{headers:{"content-type":"application/json",accept:"application/json"},method:"POST",body:t}),i=await r.json();return{res:r,data:i}}async detail(e){const t=this.getExternalIdUrl(e),n=await this.fetch(t,{headers:{accept:"application/json"}}),r=await n.json();return{res:n,data:r}}async delete(e){const t=this.getExternalIdUrl(e);return{res:await this.fetch(t,{headers:{accept:"application/json"},method:"DELETE"}),data:null}}async fetch(e,t){const n=await this.client.fetch(e,t);if(n.status>=400){let e=null;try{e=await n.json()}catch(t){try{e=await n.text()}catch(e){}}throw{res:n,data:e}}return n}getExternalIdsOfGlobalIdUrl(e){return`/${this.baseUrl}/globalIds/${e}/externalIds`}getExternalIdUrl(e){return`/${this.baseUrl}/externalIds/${e.type}/${e.externalId}`}}},47578:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(42426),t),i(n(27982),t)},19439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InventoryRoleService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="user",this.listUrl="inventoryroles",this.propertyName="roles"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}}t.InventoryRoleService=i},51233:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(19439),t)},75179:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},19430:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InventoryBinaryService=void 0;const i=r(n(6230)),s=n(91619);class o extends s.Service{constructor(){super(...arguments),this.baseUrl="inventory",this.listUrl="binaries",this.propertyName="managedObjects"}async create(e,t={}){const n=this.listUrl,r=new i.default;let s,o,a;t.fileName&&(s=t.fileName,delete t.fileName),t.fileType&&(o=t.fileType,delete t.fileType),s||(s="bin"),"undefined"!=typeof File&&e instanceof File&&(s=e.name,o=e.type),t.name||(t.name=s),t.type||(t.type=o||"c8y_upload"),r.append("file",e,s),r.append("object",JSON.stringify(t)),"function"==typeof r.getHeaders&&(a=r.getHeaders());const c=Object.assign({accept:"application/json"},a),u=await this.fetch(n,{method:"POST",body:r,headers:c}),l=await u.json();return{res:u,data:l}}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}async download(e){const t=this.getDetailUrl(e);return await this.fetch(t)}getIdFromUrl(e){if(e){const t=new RegExp("\\/inventory\\/binaries\\/(\\d+)|\\/inventory\\/managedObjects\\/(\\d+)"),n=e.match(t);return n&&(n[1]||n[2])}}}t.InventoryBinaryService=o},14967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InventoryService=t.ChildType=void 0;const r=n(91619),i=n(19430);var s;!function(e){e.ASSETS="childAssets",e.DEVICES="childDevices",e.ADDITIONS="childAdditions"}(s=t.ChildType||(t.ChildType={}));class o extends r.Service{constructor(e,t){super(e,t),this.baseUrl="inventory",this.listUrl="managedObjects",this.propertyName="managedObjects",this.channel="/managedobjects/*",this.inventoriesQueryParamName="query",this.devicesQueryParamName="q",this.queriesUtil=new r.QueriesUtil,this.binary=new i.InventoryBinaryService(e)}async detail(e,t={}){return super.detail(e,t)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async listQuery(e,t={}){return t[this.inventoriesQueryParamName]=this.queriesUtil.buildQuery(e),super.list(t)}async listQueryDevices(e,t={}){return t[this.devicesQueryParamName]=this.queriesUtil.buildQuery(e),super.list(t)}async delete(e,t={}){return super.delete(e,t)}async childAdditionsList(e,t={}){return this.listChildren(s.ADDITIONS,e,t)}async childAdditionsCreate(e,t){return this.createChild(s.ADDITIONS,e,t)}async childAdditionsAdd(e,t){return this.addChild(s.ADDITIONS,e,t)}async childAdditionsRemove(e,t){return this.removeChild(s.ADDITIONS,e,t)}async childAssetsList(e,t={}){return this.listChildren(s.ASSETS,e,t)}async childAssetsCreate(e,t){return this.createChild(s.ASSETS,e,t)}async childAssetsAdd(e,t){return this.addChild(s.ASSETS,e,t)}async childAssetsBulkAdd(e,t){return this.addChildBulk(s.ASSETS,e,t)}async childAssetsRemove(e,t){return this.removeChild(s.ASSETS,e,t)}async childDevicesList(e,t={}){return this.listChildren(s.DEVICES,e,t)}async childDevicesCreate(e,t){return this.createChild(s.DEVICES,e,t)}async childDevicesAdd(e,t){return this.addChild(s.DEVICES,e,t)}async childDevicesRemove(e,t){return this.removeChild(s.DEVICES,e,t)}async getSupportedMeasurements(e){return this.getSupportedMeasurementDetails(e,"supportedMeasurements")}async getSupportedSeries(e){return this.getSupportedMeasurementDetails(e,"supportedSeries")}async getMeasurementsAndSeries(e){const[t,n]=await Promise.all([this.getSupportedMeasurements(e),this.getSupportedSeries(e)]),r=t.sort(((e,t)=>t.length-e.length));return n.map((e=>{const t=r.find((t=>0===e.indexOf(`${t}.`)));return{fragment:t,series:e.replace(`${t}.`,"")}})).filter((e=>!!e.fragment))}async assetKPIsList(e,t={}){return this.listKPIs(e,t)}async listKPIs(e,t={}){const n=this.getChildrenUrl("kpis",e),r=await this.fetch(n,this.changeFetchOptions({headers:{accept:"application/json"},params:t},n)),i=await r.json();return{res:r,data:i[this.propertyName],paging:this.getPaging(i,t)}}onBeforeUpdate(e){return delete e.lastUpdated,e}onBeforeCreate(e){return delete e.id,delete e.lastUpdated,e}getChildrenUrl(e,t){return`${this.getDetailUrl(t)}/${e}`}getChildUrl(e,t,n){const r=this.getIdString(t);return`${this.getChildrenUrl(e,n)}/${r}`}async listChildren(e,t,n={}){const r=this.getChildrenUrl(e,t),i=await this.fetch(r,{headers:{"content-type":"application/json"},params:n}),s=await i.json(),o=s.references.map((e=>e.managedObject)),a=this.getPaging(s,n);return a.list=n=>this.listChildren(e,t,n),{res:i,data:o,paging:a}}async createChild(e,t,n){const r=this.getChildrenUrl(e,n),i=JSON.stringify(this.onBeforeCreate(t)),s={"content-type":this.mimeType("managedObject"),accept:"application/json"},o=await this.fetch(r,{method:"POST",body:i,headers:s}),a=await o.json();return{res:o,data:a}}async addChild(e,t,n){const r=this.getChildrenUrl(e,n),i=this.getIdString(t),s=JSON.stringify({managedObject:{id:String(i)}}),o={accept:"application/json","content-type":this.mimeType("managedObjectReference")},a=await this.fetch(r,{method:"POST",body:s,headers:o});let c=await a.json();return c=c.managedObject,{res:a,data:c}}async addChildBulk(e,t,n){const r=this.getChildrenUrl(e,n),i=t.map((e=>({managedObject:{id:this.getIdString(e)}}))),s=JSON.stringify({references:i}),o={accept:"application/json","content-type":this.mimeType("managedObjectReferenceCollection")},a=await this.fetch(r,{method:"POST",body:s,headers:o}),c=(await a.json()).references;return{res:a,data:c.map((e=>e.managedObject))}}async removeChild(e,t,n){const r=this.getIdString(t),i=`${this.getChildrenUrl(e,n)}/${r}`;return{res:await this.fetch(i,{method:"DELETE",headers:{accept:"application/json"}}),data:null}}async getSupportedMeasurementDetails(e,t="supportedSeries"){const n=`${this.getDetailUrl(e)}/${t}`;this.getIdString(e);const r=await this.fetch(n,{headers:{accept:"application/json"}}),i=await r.json();return i.c8y_SupportedMeasurements||i.c8y_SupportedSeries}}t.InventoryService=o},82156:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(14967),t),i(n(19430),t),i(n(75179),t)},79997:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53729:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},81519:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aggregationType=void 0,function(e){e.MINUTELY="MINUTELY",e.HOURLY="HOURLY",e.DAILY="DAILY"}(t.aggregationType||(t.aggregationType={}))},64139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasurementService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="measurement",this.listUrl="measurements",this.propertyName="measurements",this.channel="/measurements/*"}async detail(e){return super.detail(e)}async create(e){return super.create(this.onBeforeCreate(e))}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}async listSeries(e){const t=`${this.baseUrl}/${this.listUrl}/series`,n=await this.client.fetch(t,{params:e}),r=await n.json();return{res:n,data:r}}onBeforeCreate(e){if(e.time||(e.time=new Date),e.type||(e.type="c8y_Measurement"),e.sourceId){const{sourceId:t}=e;delete e.sourceId,e.source||(e.source={id:String(t)})}return e}}t.MeasurementService=i},69718:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(64139),t),i(n(79997),t),i(n(53729),t),i(n(81519),t)},65813:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},95968:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},66715:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationBulkGeneralStatus=void 0;const r=n(11950);!function(e){e[e.SCHEDULED=(0,r.gettext)("SCHEDULED")]="SCHEDULED",e[e.EXECUTING=(0,r.gettext)("EXECUTING")]="EXECUTING",e[e.EXECUTING_WITH_ERROR=(0,r.gettext)("EXECUTING_WITH_ERROR")]="EXECUTING_WITH_ERROR",e[e.CANCELED=(0,r.gettext)("CANCELED")]="CANCELED",e[e.FAILED=(0,r.gettext)("FAILED")]="FAILED",e[e.SUCCESSFUL=(0,r.gettext)("SUCCESSFUL")]="SUCCESSFUL",e[e.DELETED=(0,r.gettext)("DELETED")]="DELETED",e[e.INCORRECT=(0,r.gettext)("INCORRECT")]="INCORRECT"}(t.OperationBulkGeneralStatus||(t.OperationBulkGeneralStatus={}))},50037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationBulkService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="devicecontrol",this.listUrl="bulkoperations",this.propertyName="bulkOperations"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}}t.OperationBulkService=i},43963:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationBulkStatus=void 0;const r=n(11950);!function(e){e[e.ACTIVE=(0,r.gettext)("ACTIVE")]="ACTIVE",e[e.IN_PROGRESS=(0,r.gettext)("IN_PROGRESS")]="IN_PROGRESS",e[e.COMPLETED=(0,r.gettext)("COMPLETED")]="COMPLETED",e[e.DELETED=(0,r.gettext)("DELETED")]="DELETED"}(t.OperationBulkStatus||(t.OperationBulkStatus={}))},57847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="devicecontrol",this.listUrl="operations",this.propertyName="operations"}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}}t.OperationService=i},49645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationStatus=void 0;const r=n(11950);!function(e){e[e.PENDING=(0,r.gettext)("PENDING")]="PENDING",e[e.EXECUTING=(0,r.gettext)("EXECUTING")]="EXECUTING",e[e.SUCCESSFUL=(0,r.gettext)("SUCCESSFUL")]="SUCCESSFUL",e[e.FAILED=(0,r.gettext)("FAILED")]="FAILED"}(t.OperationStatus||(t.OperationStatus={}))},64283:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57847),t),i(n(50037),t),i(n(43963),t),i(n(29479),t),i(n(65813),t),i(n(95968),t),i(n(49645),t),i(n(66715),t)},65038:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(58994),t),i(n(55916),t),i(n(40109),t),i(n(28887),t),i(n(91619),t),i(n(52261),t),i(n(96875),t),i(n(31939),t),i(n(47578),t),i(n(82156),t),i(n(51233),t),i(n(69718),t),i(n(64283),t),i(n(89565),t),i(n(72866),t),i(n(98463),t),i(n(55894),t),i(n(76922),t),i(n(53994),t),i(n(27445),t),i(n(24113),t),i(n(73970),t),i(n(51765),t),i(n(97692),t)},59898:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetaChannel=void 0,function(e){e.HANDSHAKE="/meta/handshake",e.CONNECT="/meta/connect",e.SUBSCRIBE="/meta/subscribe",e.UNSUBSCRIBE="/meta/unsubscribe"}(t.MetaChannel||(t.MetaChannel={}))},44246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Realtime=void 0;const r=n(92599),i=n(59898);t.Realtime=class{constructor(e,t="/notification/realtime",n){this.client=e,this.url=t,this.cometd=new r.CometD,this.metaHandshake=e=>{if(!e.successful)throw new Error("Handshake failed")},this.cometd.websocketEnabled=!0,this.cometd.addListener(i.MetaChannel.HANDSHAKE,n||this.metaHandshake)}subscribe(e,t){return this.checkConnection(),this.cometd.subscribe(e,t)}unsubscribe(e){return this.cometd.unsubscribe(e)}disconnect(){this.cometd.disconnect()}checkConnection(){const{cometd:e,client:t,url:n}=this;if(e.isDisconnected()){const{headers:r}=t.getFetchOptions(),i={url:t.getUrl(n),requestHeaders:r};e.configure(i),this.handshake(t.getCometdHandshake())}}handshake(e){this.cometd.handshake(e)}}},89565:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(44246),t)},70602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartRulesService=t.SmartGroupsService=t.TrustedCertificateService=t.IdentityService=t.Realtime=t.UserGroupService=t.UserRoleService=t.DeviceRegistrationBulkService=t.DeviceRegistrationService=t.InventoryRoleService=t.AuditService=t.TenantLoginOptionsService=t.TenantSecurityOptionsService=t.TenantOptionsService=t.SystemOptionsService=t.TenantService=t.UserService=t.ApplicationService=t.OperationService=t.OperationBulkService=t.AlarmService=t.MeasurementService=t.InventoryBinaryService=t.InventoryService=t.EventBinaryService=t.EventService=t.BasicAuth=t.FetchClient=void 0;var r=n(91619);Object.defineProperty(t,"FetchClient",{enumerable:!0,get:function(){return r.FetchClient}}),Object.defineProperty(t,"BasicAuth",{enumerable:!0,get:function(){return r.BasicAuth}});var i=n(31939);Object.defineProperty(t,"EventService",{enumerable:!0,get:function(){return i.EventService}}),Object.defineProperty(t,"EventBinaryService",{enumerable:!0,get:function(){return i.EventBinaryService}});var s=n(82156);Object.defineProperty(t,"InventoryService",{enumerable:!0,get:function(){return s.InventoryService}}),Object.defineProperty(t,"InventoryBinaryService",{enumerable:!0,get:function(){return s.InventoryBinaryService}});var o=n(69718);Object.defineProperty(t,"MeasurementService",{enumerable:!0,get:function(){return o.MeasurementService}});var a=n(55916);Object.defineProperty(t,"AlarmService",{enumerable:!0,get:function(){return a.AlarmService}});var c=n(64283);Object.defineProperty(t,"OperationBulkService",{enumerable:!0,get:function(){return c.OperationBulkService}}),Object.defineProperty(t,"OperationService",{enumerable:!0,get:function(){return c.OperationService}});var u=n(40109);Object.defineProperty(t,"ApplicationService",{enumerable:!0,get:function(){return u.ApplicationService}});var l=n(27445);Object.defineProperty(t,"UserService",{enumerable:!0,get:function(){return l.UserService}});var d=n(98463);Object.defineProperty(t,"TenantService",{enumerable:!0,get:function(){return d.TenantService}});var p=n(72866);Object.defineProperty(t,"SystemOptionsService",{enumerable:!0,get:function(){return p.SystemOptionsService}});var h=n(55894);Object.defineProperty(t,"TenantOptionsService",{enumerable:!0,get:function(){return h.TenantOptionsService}});var f=n(76922);Object.defineProperty(t,"TenantSecurityOptionsService",{enumerable:!0,get:function(){return f.TenantSecurityOptionsService}});var y=n(53994);Object.defineProperty(t,"TenantLoginOptionsService",{enumerable:!0,get:function(){return y.TenantLoginOptionsService}});var g=n(28887);Object.defineProperty(t,"AuditService",{enumerable:!0,get:function(){return g.AuditService}});var v=n(51233);Object.defineProperty(t,"InventoryRoleService",{enumerable:!0,get:function(){return v.InventoryRoleService}});var b=n(96875);Object.defineProperty(t,"DeviceRegistrationService",{enumerable:!0,get:function(){return b.DeviceRegistrationService}}),Object.defineProperty(t,"DeviceRegistrationBulkService",{enumerable:!0,get:function(){return b.DeviceRegistrationBulkService}});var m=n(73970);Object.defineProperty(t,"UserRoleService",{enumerable:!0,get:function(){return m.UserRoleService}});var _=n(24113);Object.defineProperty(t,"UserGroupService",{enumerable:!0,get:function(){return _.UserGroupService}});var O=n(89565);Object.defineProperty(t,"Realtime",{enumerable:!0,get:function(){return O.Realtime}});var S=n(47578);Object.defineProperty(t,"IdentityService",{enumerable:!0,get:function(){return S.IdentityService}});var w=n(52261);Object.defineProperty(t,"TrustedCertificateService",{enumerable:!0,get:function(){return w.TrustedCertificateService}});var T=n(97692);Object.defineProperty(t,"SmartGroupsService",{enumerable:!0,get:function(){return T.SmartGroupsService}});var j=n(51765);Object.defineProperty(t,"SmartRulesService",{enumerable:!0,get:function(){return j.SmartRulesService}})},45340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartGroupsService=void 0;const r=n(40109),i=n(77366);class s extends i.Service{constructor(e){super(e),this.baseUrl="inventory",this.listUrl="managedObjects",this.SMART_GROUP_TYPE="c8y_DynamicGroup",this.SMART_GROUP_FRAGMENT_TYPE="c8y_IsDynamicGroup",this.DEVICE_GROUP_FRAGMENT_TYPE="c8y_IsDeviceGroup",this.DEVICE_GROUP_TYPE="c8y_DeviceGroup",this.DEVICE_SUBGROUP_TYPE="c8y_DeviceSubgroup",this.COLUMNS_CONFIG_FRAGMENT="c8y_DeviceColumnsConfig",this.FILTER_CONFIG_FRAGMENT="c8y_DeviceFilterConfig",this.QUERY_STRING_FRAGMENT="c8y_DeviceQueryString",this.SMART_GROUPS_V2_MICROSERVICE_APP_NAME="smartgroup",this.SMART_GROUPS_V2_MICROSERVICE_BASE_PATH="service/smartgroup",this.SMART_GROUPS_V2_MICROSERVICE_ENDPOINT_PATH=`${this.SMART_GROUPS_V2_MICROSERVICE_BASE_PATH}/smartgroups`,this.applicationService=new r.ApplicationService(e)}async detail(e,t={}){return super.detail(e,t)}async create(e){const{data:t}=await this.isSmartGroupsV2MicroserviceInstalled(),n={...e.smartGroup,[this.QUERY_STRING_FRAGMENT]:e.deviceQueryString,[this.COLUMNS_CONFIG_FRAGMENT]:e.configurableColumns,...e.filterConfig&&{[this.FILTER_CONFIG_FRAGMENT]:e.filterConfig}};return t?this.createSmartGroupV2(n):super.create(n)}async update(e,t={}){const{id:n}=e,{data:r}=await this.isSmartGroupsV2MicroserviceInstalled(),{data:i}=await this.detail(n,{withChildren:!1});return r&&this.isSmartGroupV2(i)?this.updateSmartGroupV2(e,t):super.update(e)}async updateSmartGroupV2(e,t={}){const{id:n,...r}=e,i=JSON.stringify(this.onBeforeUpdate(r)),s=`${this.SMART_GROUPS_V2_MICROSERVICE_ENDPOINT_PATH}/${n}`,o=await this.fetch(s,{method:"PUT",body:i,headers:{"content-type":"application/json",accept:"application/json"},params:{...t}}),a=await o.json();return{res:o,data:a}}async delete(e,t={}){const{data:n}=await this.isSmartGroupsV2MicroserviceInstalled(),r=(await this.detail(e,{withChildren:!1})).data;return n&&this.isSmartGroupV2(r)?await this.removeSmartGroupV2(r):await super.delete(r,t)}isSmartGroupsV2MicroserviceInstalled(){return this.applicationService.isAvailable({name:this.SMART_GROUPS_V2_MICROSERVICE_APP_NAME})}isSmartGroup(e){const t=e.hasOwnProperty(this.SMART_GROUP_FRAGMENT_TYPE),n=e&&e.type===this.SMART_GROUP_TYPE;return t||n}isSmartGroupV2(e){const t=e.hasOwnProperty(this.SMART_GROUP_FRAGMENT_TYPE),n=e.hasOwnProperty(this.DEVICE_GROUP_FRAGMENT_TYPE),r=e&&e.type===this.DEVICE_GROUP_TYPE||e.type===this.DEVICE_SUBGROUP_TYPE;return t&&n&&r}async removeSmartGroupV2(e){let t;t="object"==typeof e&&e.id?e.id:e;const n=`${this.SMART_GROUPS_V2_MICROSERVICE_ENDPOINT_PATH}/${t}`;return{res:await this.client.fetch(n,{method:"DELETE"}),data:null}}getUrl(e=""){const t=e.replace(/^\/+/,""),n=this.baseUrl.replace(/\/+$/,"");return e.includes(this.SMART_GROUPS_V2_MICROSERVICE_ENDPOINT_PATH)?t:`${n}/${t}`}async createSmartGroupV2(e){const t=JSON.stringify(e),n=this.SMART_GROUPS_V2_MICROSERVICE_ENDPOINT_PATH,r=await this.fetch(n,{method:"POST",body:t,headers:{"content-type":"application/json",accept:"application/json"}}),i=await r.json();return{res:r,data:i}}}t.SmartGroupsService=s},97692:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(45340),t)},55570:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},30165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartRulesService=void 0;const r=n(40109),i=n(77366);class s extends i.Service{constructor(e){super(e),this.baseUrl="service/smartrule",this.rulesUrl="smartrules",this.unupdatableFields=["type","cepModuleId","creationTime","lastUpdated"],this.applicationService=new r.ApplicationService(e)}async isMicroserviceAvailable(){return void 0===this.microserviceAvailable&&(this.microserviceAvailable=(await this.applicationService.isAvailable(s.microserviceName)).data),this.microserviceAvailable}async listByContext(e){const t=this.contextRulesUrl(e),n=await this.fetch(t,{method:"GET"}),r=(await n.json()).rules;return{res:n,data:r}}bulkDeactivateEnabledSources(e,t){if(0===t.length)return Promise.resolve({res:null,data:null});const{enabledSources:n}=e,r=this.disableEnabledSources(n,t),i={...e};return Object.assign(i,{enabledSources:r}),this.update(i)}async update(e){const t=this.getSmartRulesUrl(e),n=JSON.stringify(this.removeUnclonableFields(e,this.unupdatableFields)),r=await this.fetch(t,{method:"PUT",body:n,headers:{"content-type":"application/json",accept:"application/json"}}),i=await r.json();return{res:r,data:i}}disableEnabledSources(e=[],t){return e.filter((e=>!this.getListOfStringIds(t).includes(e)))}getListOfStringIds(e){return e.map((e=>"object"==typeof e&&e.id?e.id.toString():e.toString()))}getSmartRulesUrl(e){const t=e&&e.c8y_Context&&e.c8y_Context.id;let n=t?this.contextRulesUrl(t):this.rulesUrl;return e.id&&(n=`${n}/${e.id}`),n}removeUnclonableFields(e,t){const n={...e};return t.forEach((e=>{delete n[e]})),n}contextRulesUrl(e={}){return"object"==typeof e&&e.id?`managedObjects/${e.id}/smartrules`:`managedObjects/${e}/smartrules`}}t.SmartRulesService=s,s.microserviceName="smartrule"},51765:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(55570),t),i(n(30165),t)},2297:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemOptionsService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="tenant/system",this.listUrl="options",this.propertyName="options"}async detail(e){return super.detail(e)}async list(e={}){const t=this.listUrl,n=await this.fetch(t,{headers:{"content-type":"application/json"},params:e}),r=await n.json();return{res:n,data:r[this.propertyName]}}getDetailUrl(e){return`${this.listUrl}/${e.category}/${e.key}`}onBeforeCreate(e){return e}}t.SystemOptionsService=i},72866:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2297),t),i(n(9906),t)},10680:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagementSource=t.GrantType=t.TenantLoginOptionType=void 0,function(e){e.OAUTH2_INTERNAL="OAUTH2_INTERNAL",e.OAUTH2="OAUTH2",e.BASIC="BASIC"}(t.TenantLoginOptionType||(t.TenantLoginOptionType={})),function(e){e.AUTHORIZATION_CODE="AUTHORIZATION_CODE",e.PASSWORD="PASSWORD"}(t.GrantType||(t.GrantType={})),function(e){e.REMOTE="REMOTE",e.INTERNAL="INTERNAL"}(t.UserManagementSource||(t.UserManagementSource={}))},88519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TenantLoginOptionsService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="tenant",this.listUrl="loginOptions",this.propertyName="loginOptions"}async detail(e){return super.detail(e)}async list(e={}){return super.list(e)}async listForCurrentTenant(){return super.list({tenantId:this.client.tenant})}async listForManagement(){return super.list({management:!0})}async create(e){return super.create(e)}async update(e){return super.update(e)}async save(e){return e.id?this.update(e):this.create(e)}async delete(e){return super.delete(e)}}t.TenantLoginOptionsService=i},53994:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(88519),t),i(n(10680),t)},91803:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76040:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},10714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TenantOptionsService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="tenant",this.listUrl="options",this.propertyName="options",this.securityOptionsCategories=["password"],this.securityOptionsListUrl="security-options",this.systemOptions="system"}async detail(e,t={}){return super.detail(e,t)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}getDetailUrl(e){const t=encodeURIComponent(e.category),n=encodeURIComponent(e.key);return this.securityOptionsCategories.indexOf(e.category)>-1?`${this.securityOptionsListUrl}/${t}/${n}`:`${this.listUrl}/${t}/${n}`}onBeforeCreate(e){return e}}t.TenantOptionsService=i},55894:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91803),t),i(n(76040),t),i(n(10714),t)},48660:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},62794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TenantSecurityOptionsService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="tenant",this.listUrl="security-options",this.category="password",this.propertyName="options"}async detail(e){return super.detail(e)}getDetailUrl(e){return`${this.listUrl}/${this.category}/${e.key}`}onBeforeCreate(e){return e}}t.TenantSecurityOptionsService=i},76922:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(48660),t),i(n(62794),t)},64941:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},42278:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18703:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},19923:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TenantService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="tenant",this.listUrl="tenants",this.currentTenantUrl="currentTenant",this.propertyName="tenants",this.fetchOptions={method:"PUT",body:"{}",headers:{"content-type":"application/json",accept:"application/json"}}}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}async current(){const e=await this.fetch(this.currentTenantUrl,{headers:{"content-type":"application/json"}}),t=await e.json();return{res:e,data:t}}async enableSupportUser(){return{res:await this.fetch("support-user/enable",this.fetchOptions),data:null}}async disableSupportUser(){return{res:await this.fetch("support-user/disable",this.fetchOptions),data:null}}async currentTenantType(){const e=await this.current();return e.data.customProperties&&"TRIAL"===e.data.customProperties.tenantType?"TRIAL":"REGULAR"}async getTfaSettings(e){const t=`tenants/${this.getIdString(e)}/tfa`,n=await this.fetch(t);return await n.json()}async subscribeApplication(e,t){const n=this.getIdString(e),r=t.id,i=`tenants/${n}/applications`,s=JSON.stringify({application:{id:r,self:t.self}}),o={"content-type":this.mimeType("applicationReference")};return{res:await this.fetch(i,this.changeFetchOptions({method:"POST",body:s,headers:o},i)),data:null}}async unsubscribeApplication(e,t){const n=`tenants/${this.getIdString(e)}/applications/${t.id}`;return{res:await this.fetch(n,this.changeFetchOptions({method:"DELETE"},n)),data:null}}getIdString(e){return e.id||e.name}onBeforeCreate(e){return e}}t.TenantService=i},67272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TenantStatus=void 0;const r=n(11950);!function(e){e[e.ACTIVE=(0,r.gettext)("ACTIVE")]="ACTIVE",e[e.SUSPENDED=(0,r.gettext)("SUSPENDED")]="SUSPENDED"}(t.TenantStatus||(t.TenantStatus={}))},92925:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TfaStrategy=void 0,function(e){e.TOTP="TOTP",e.SMS="SMS"}(t.TfaStrategy||(t.TfaStrategy={}))},98463:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3730),t),i(n(42278),t),i(n(64941),t),i(n(18703),t),i(n(67272),t),i(n(19923),t),i(n(92925),t)},8454:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrustedCertificateService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.listUrl="trusted-certificates",this.proofOfPossessionUrl="trusted-certificates-pop",this.propertyName="certificates"}get baseUrl(){return`/tenant/tenants/${this.client.tenant}`}async list(e={}){return super.list(e)}async detail(e){return super.detail(e)}async delete(e){return super.delete(e)}async update(e){return super.update(e)}async create(e){return super.create(e)}async regeneratePoPVerificationCode(e){const t=`${this.proofOfPossessionUrl}/${this.getEntityId(e)}/verification-code`,n=await this.fetch(t,{headers:{"content-type":"application/json",Accept:"application/json"},method:"POST"}),r=await n.json();return{res:n,data:r}}async verifySignedVerificationCode(e,t){const n=`${this.proofOfPossessionUrl}/${this.getEntityId(e)}/pop`,r=JSON.stringify({proofOfPossessionSignedVerificationCode:t}),i=await this.fetch(n,{method:"POST",body:r,headers:{"content-type":"application/json",Accept:"application/json"}}),s=await i.json();return{res:i,data:s}}getDetailUrl(e){const t=this.getEntityId(e);return`${this.listUrl}/${t}`}getEntityId(e){let t;return t="object"==typeof e&&e.fingerprint?e.fingerprint:e,t}}t.TrustedCertificateService=i},52261:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(82588),t),i(n(8454),t)},67614:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},25529:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},36462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserGroupService=void 0;const r=n(91619);var i;!function(e){e.ROLES="roles",e.USERS="users"}(i||(i={}));class s extends r.Service{constructor(){super(...arguments),this.baseUrl="user",this.propertyName="groups"}get listUrl(){return`${this.client.tenant}/groups`}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}async addRoleToGroup(e,t){return this.addChild(i.ROLES,e,t)}async removeRoleFromGroup(e,t){return this.removeChild(i.ROLES,e,t)}async addUserToGroup(e,t){return this.addChild(i.USERS,e,t)}async removeUserFromGroup(e,t){return this.removeChild(i.USERS,e,t)}getSelf(e){return"object"==typeof e&&e.self?e.self:e}getChildUrl(e,t){return`${this.getDetailUrl(t)}/${e}`}getChildReferenceAsBody(e,t){const n=this.getSelf(t);switch(e){case i.ROLES:return JSON.stringify({role:{self:String(n)}});case i.USERS:return JSON.stringify({user:{self:String(n)}})}throw new Error("UserGroupService -> getChild -> unsupported child type")}async addChild(e,t,n){const r=this.getChildUrl(e,t),i=this.getChildReferenceAsBody(e,n),s=await this.fetch(r,{method:"POST",body:i,headers:{accept:"application/json","content-type":"application/json"}});let o=await s.json();return o=o.managedObject,{res:s,data:o}}async removeChild(e,t,n){const r=this.getIdString(n),i=`${this.getChildUrl(e,t)}/${encodeURIComponent(String(r))}`;return{res:await this.fetch(i,{method:"DELETE",headers:{accept:"application/json"}}),data:null}}}t.UserGroupService=s},24113:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(36462),t),i(n(67614),t),i(n(25529),t)},4460:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},20823:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},65489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserRoleService=void 0;const r=n(91619);class i extends r.Service{constructor(){super(...arguments),this.baseUrl="user",this.listUrl="roles",this.propertyName="roles"}async detail(e){return super.detail(e)}async list(e={}){return super.list(e)}}t.UserRoleService=i},73970:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4460),t),i(n(65489),t),i(n(20823),t)},96759:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},33617:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},74538:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8500:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76133:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},50442:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43388:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordStrength=void 0,function(e){e.GREEN="GREEN",e.RED="RED",e.YELLOW="YELLOW"}(t.PasswordStrength||(t.PasswordStrength={}))},4323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInventoryRoleService=void 0;const r=n(91619);class i extends r.Service{constructor(e,t){super(t),this.listUrl="inventory",this.currenUserUrl="currentUser",this.propertyName="inventoryAssignments",this.baseUrl=`user/${e}/roles`}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}}t.UserInventoryRoleService=i},89394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserService=void 0;const r=n(91619),i=n(4323);class s extends r.Service{constructor(){super(...arguments),this.baseUrl="user",this.currentUserUrl="currentUser",this.passwordResetUrl="passwordReset",this.currentUserPhoneUrl="currentUserPhone",this.verifyTFACodeUrl="pin",this.totpCurrentUserURL=`${this.currentUserUrl}/totpSecret`,this.verifyTOTPCodeUrl=`${this.totpCurrentUserURL}/verify`,this.activateTOTPCodeUrl=`${this.totpCurrentUserURL}/activity`,this.revokeTOTPSecretUrl="totpSecret/revoke",this.propertyName="users"}get listUrl(){return`${this.client.tenant}/users`}get newsletterEmailsUrl(){return`${this.client.tenant}/users/newsletterEmails`}get currentUserPasswordUrl(){return`${this.currentUserUrl}/password`}async detail(e){return super.detail(e)}async create(e){return super.create(e)}async update(e){return super.update(e)}async list(e={}){return super.list(e)}async delete(e){return super.delete(e)}inventoryAssignment(e){return new i.UserInventoryRoleService(this.getDetailUrl(e),this.client)}async current(){const e=await this.fetch(this.currentUserUrl,{headers:{"content-type":"application/json",Accept:"application/vnd.com.nsn.cumulocity.user+json;"}}),t=await e.json();return{res:e,data:t}}async currentWithEffectiveRoles(){const e=await this.fetch(this.currentUserUrl,{headers:{"content-type":"application/json",Accept:"application/vnd.com.nsn.cumulocity.currentUser+json;"}}),t=await e.json();return{res:e,data:t}}async updateCurrent(e){const t="application/vnd.com.nsn.cumulocity.user+json",n={"content-type":t,Accept:t},r=JSON.stringify(this.onBeforeUpdate(e)),i=await this.fetch(this.currentUserUrl,{headers:n,body:r,method:"PUT"}),s=await i.json();return{res:i,data:s}}async sendPasswordResetMail(e,t){const n=this.passwordResetUrl,r=t?{tenantId:t}:{},i=JSON.stringify({email:e});return{res:await this.fetch(n,{headers:{"content-type":"application/json",accept:"application/json"},method:"POST",params:r,body:i}),data:null}}async resetPassword(e,t){const n=this.passwordResetUrl,r=t?{tenantId:t}:{},i=JSON.stringify(e);return{res:await this.fetch(n,{headers:{"content-type":"application/json",accept:"application/json"},method:"PUT",params:r,body:i}),data:null}}async verifyTFACode(e){const t=JSON.stringify({pin:e});return{res:await this.fetch(this.verifyTFACodeUrl,{headers:{"content-type":"application/json",accept:"application/json"},body:t,method:"POST"}),data:null}}async verifyTotpCode(e){const t=JSON.stringify({code:e});return{res:await this.fetch(this.verifyTOTPCodeUrl,{headers:{"content-type":"application/json"},body:t,method:"POST"}),data:null}}async activateTotp(){const e=JSON.stringify({isActive:!0});return{res:await this.fetch(this.activateTOTPCodeUrl,{headers:{"content-type":"application/json"},body:e,method:"POST"}),data:null}}async getActivityTotp(){const e=await this.fetch(this.activateTOTPCodeUrl,{headers:{"content-type":"application/json"},method:"GET"}),t=await e.json();return{res:e,data:t}}async generateTotpSecret(){const e=await this.fetch(this.totpCurrentUserURL,{headers:{"content-type":"application/json",accept:"application/json"},method:"POST"}),t=await e.json();return{res:e,data:t}}async totpRevokeSecret(e){const t=`${this.getDetailUrl(e)}/${this.revokeTOTPSecretUrl}`;return{res:await this.fetch(t,{headers:{accept:"application/json"},method:"DELETE"}),data:null}}async savePhoneNumber(e){const t=this.currentUserPhoneUrl,n={method:"PUT",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({phone:e})},r=await this.fetch(t,n),i=await r.json();return{res:r,data:i}}async getNewsletterEmails(){const e=this.newsletterEmailsUrl,t=await this.fetch(e,{method:"GET",headers:{accept:"text/plain"}}),n=await t.text();return{res:t,data:n}}async changeUserPassword(e,t,n){const r=JSON.stringify({newPassword:t,currentUserPassword:n});return{res:await this.fetch(this.changeUserPasswordUrl(e),{headers:{"content-type":"application/json"},body:r,method:"PUT"}),data:null}}async changeCurrentUserPassword(e,t){const n=JSON.stringify({newPassword:e,currentUserPassword:t});return{res:await this.fetch(this.currentUserPasswordUrl,{headers:{"content-type":"application/json"},body:n,method:"PUT"}),data:null}}hasRole(e,t){return this.hasRoleInUser(e,t)||this.hasRoleInGroups(e,t)}hasAllRoles(e,t){return t.every((t=>this.hasRole(e,t)))}hasAnyRole(e,t){return t.some((t=>this.hasRole(e,t)))}isDeviceUser(e){return e.id.match(/^device_/)}onBeforeUpdate(e){const t=Object.assign({},e);return delete t.id,delete t.userName,t}getDetailUrl(e){return`${this.listUrl}/${encodeURIComponent(this.getId(e))}`}getId(e){let t;return t="object"==typeof e&&e.id?e.id:"object"==typeof e&&e.userName?e.userName:e,String(t)}hasRoleInUser(e,t){const n=e.effectiveRoles||[];return this.hasRoleInReferences(e&&e.roles&&e.roles.references||[],t)||n.some((({id:e})=>t===e))}hasRoleInGroups(e,t){return(e&&e.groups&&e.groups.references||[]).some((e=>this.hasRoleInReferences(e.group.roles.references,t)))}hasRoleInReferences(e,t){return e.some((e=>e.role.id===t))}changeUserPasswordUrl(e){return`${this.client.tenant}/users/${this.getId(e)}/password`}}t.UserService=s},27445:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(76133),t),i(n(96759),t),i(n(50442),t),i(n(74538),t),i(n(8500),t),i(n(89394),t),i(n(4323),t),i(n(33617),t),i(n(43388),t)},24692:function(e,t,n){"use strict";n.r(t),n.d(t,{atob:function(){return d},atobu:function(){return p},btoa:function(){return a},btoau:function(){return c}});var r=function(e){function t(){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidCharacterError",t.prototype.code=5,t},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=r("The string to be encoded contains characters out of range"),o="undefined"!=typeof btoa?function(e){return btoa(e)}:function(e){for(var t,n,r=String(e),o="",a=0,c=i;r.charAt(0|a)||(c="=",a%1);o+=c.charAt(63&t>>8-a%1*8)){if((n=r.charCodeAt(a+=3/4))>255)throw new s;t=t<<8|n}return o},a=function(e){return o(function(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))}(e))},c=function(e){return a(e).replace(/\+/g,"-").replace(/\//g,"_")},u=r("The string to be decoded is not correctly encoded"),l="undefined"!=typeof atob?function(e){return atob(e)}:function(e){var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new u;for(var n,r,s="",o=0,a=0;r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?s+=String.fromCharCode(255&n>>(-2*o&6)):0)r=i.indexOf(r);return s},d=function(e){return function(e){return decodeURIComponent(e.split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(l(e))},p=function(e){return d(e.replace(/-/g,"+").replace(/_/g,"/"))}},23524:function(e){e.exports=function(){var e=function(){var e=0,t={};this.register=function(n){var r=++e;return t[r]=n,r},this.unregister=function(e){var n=t[e];return delete t[e],n},this.setTimeout=function(e,t){return window.setTimeout(e,t)},this.clearTimeout=function(e){window.clearTimeout(e)}};function t(){var e={};self.onmessage=function(t){var n=t.data,r=e[n.id];switch(n.type){case"setTimeout":e[n.id]=self.setTimeout((function(){delete e[n.id],self.postMessage({id:n.id})}),n.delay);break;case"clearTimeout":delete e[n.id],r&&self.clearTimeout(r);break;default:throw"Unknown command "+n.type}}}var n={isString:function(e){return null!=e&&("string"==typeof e||e instanceof String)},isArray:function(e){return null!=e&&e instanceof Array},inArray:function(e,t){for(var n=0;n<t.length;++n)if(e===t[n])return n;return-1}},r=function(){var e=[],t={};this.getTransportTypes=function(){return e.slice(0)},this.findTransportTypes=function(n,r,i){for(var s=[],o=0;o<e.length;++o){var a=e[o];!0===t[a].accept(n,r,i)&&s.push(a)}return s},this.negotiateTransport=function(n,r,i,s){for(var o=0;o<e.length;++o)for(var a=e[o],c=0;c<n.length;++c)if(a===n[c]){var u=t[a];if(!0===u.accept(r,i,s))return u}return null},this.add=function(n,r,i){for(var s=!1,o=0;o<e.length;++o)if(e[o]===n){s=!0;break}return s||("number"!=typeof i?e.push(n):e.splice(i,0,n),t[n]=r),!s},this.find=function(n){for(var r=0;r<e.length;++r)if(e[r]===n)return t[n];return null},this.remove=function(n){for(var r=0;r<e.length;++r)if(e[r]===n){e.splice(r,1);var i=t[n];return delete t[n],i}return null},this.clear=function(){e=[],t={}},this.reset=function(n){for(var r=0;r<e.length;++r)t[e[r]].reset(n)}},i=function(){var e,t,r;this.registered=function(n,r){e=n,t=r},this.unregistered=function(){e=null,t=null},this._debug=function(){t._debug.apply(t,arguments)},this._mixin=function(){return t._mixin.apply(t,arguments)},this.getConfiguration=function(){return t.getConfiguration()},this.getAdvice=function(){return t.getAdvice()},this.setTimeout=function(e,n){return t.setTimeout(e,n)},this.clearTimeout=function(e){t.clearTimeout(e)},this.convertToMessages=function(e){if(n.isString(e))try{return JSON.parse(e)}catch(t){throw this._debug("Could not convert to JSON the following string",'"'+e+'"'),t}if(n.isArray(e))return e;if(null==e)return[];if(e instanceof Object)return[e];throw"Conversion Error "+e+", typeof "+typeof e},this.accept=function(e,t,n){throw"Abstract"},this.getType=function(){return e},this.getURL=function(){return r},this.setURL=function(e){r=e},this.send=function(e,t){throw"Abstract"},this.reset=function(t){this._debug("Transport",e,"reset",t?"initial":"retry")},this.abort=function(){this._debug("Transport",e,"aborted")},this.toString=function(){return this.getType()}};i.derive=function(e){function t(){}return t.prototype=e,new t};var s=function(){var e=new i,t=i.derive(e),r=0,s=null,o=[],a=[];function c(e){for(;a.length>0;){var t=a[0],n=t[0],r=t[1];if(n.url!==e.url||n.sync!==e.sync)break;a.shift(),e.messages=e.messages.concat(n.messages),this._debug("Coalesced",n.messages.length,"messages from request",r.id)}}function u(e,t){if(this.transportSend(e,t),t.expired=!1,!e.sync){var n=this.getConfiguration().maxNetworkDelay,r=n;!0===t.metaConnect&&(r+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",r,"ms for the response, maxNetworkDelay",n);var i=this;t.timeout=this.setTimeout((function(){t.expired=!0;var n="Request "+t.id+" of transport "+i.getType()+" exceeded "+r+" ms max network delay",s={reason:n},o=t.xhr;s.httpCode=i.xhrStatus(o),i.abortXHR(o),i._debug(n),i.complete(t,!1,t.metaConnect),e.onFailure(o,e.messages,s)}),r)}}function l(e){var t=++r,n={id:t,metaConnect:!1,envelope:e};o.length<this.getConfiguration().maxConnections-1?(o.push(n),u.call(this,e,n)):(this._debug("Transport",this.getType(),"queueing request",t,"envelope",e),a.push([e,n]))}function d(e){var t=e.id;if(this._debug("Transport",this.getType(),"/meta/connect complete, request",t),null!==s&&s.id!==t)throw"/meta/connect request mismatch, completing request "+t;s=null}function p(e,t){var r=n.inArray(e,o);if(r>=0&&o.splice(r,1),a.length>0){var i=a.shift(),s=i[0],u=i[1];if(this._debug("Transport dequeued request",u.id),t)this.getConfiguration().autoBatch&&c.call(this,s),l.call(this,s),this._debug("Transport completed request",e.id,s);else{var d=this;this.setTimeout((function(){d.complete(u,!1,u.metaConnect);var e={reason:"Previous request failed"},t=u.xhr;e.httpCode=d.xhrStatus(t),s.onFailure(t,s.messages,e)}),0)}}}function h(e){if(null!==s)throw"Concurrent /meta/connect requests not allowed, request id="+s.id+" not yet completed";var t=++r;this._debug("Transport",this.getType(),"/meta/connect send, request",t,"envelope",e);var n={id:t,metaConnect:!0,envelope:e};u.call(this,e,n),s=n}return t.complete=function(e,t,n){n?d.call(this,e):p.call(this,e,t)},t.transportSend=function(e,t){throw"Abstract"},t.transportSuccess=function(e,t,n){t.expired||(this.clearTimeout(t.timeout),this.complete(t,!0,t.metaConnect),n&&n.length>0?e.onSuccess(n):e.onFailure(t.xhr,e.messages,{httpCode:204}))},t.transportFailure=function(e,t,n){t.expired||(this.clearTimeout(t.timeout),this.complete(t,!1,t.metaConnect),e.onFailure(t.xhr,e.messages,n))},t.send=function(e,t){t?h.call(this,e):l.call(this,e)},t.abort=function(){e.abort();for(var t=0;t<o.length;++t){var n=o[t];n&&(this._debug("Aborting request",n),this.abortXHR(n.xhr)||this.transportFailure(n.envelope,n,{reason:"abort"}))}var r=s;r&&(this._debug("Aborting /meta/connect request",r),this.abortXHR(r.xhr)||this.transportFailure(r.envelope,r,{reason:"abort"})),this.reset(!0)},t.reset=function(t){e.reset(t),s=null,o=[],a=[]},t.abortXHR=function(e){if(e)try{var t=e.readyState;return e.abort(),t!==window.XMLHttpRequest.UNSENT}catch(e){this._debug(e)}return!1},t.xhrStatus=function(e){if(e)try{return e.status}catch(e){this._debug(e)}return-1},t},o=function(){var e=new s,t=i.derive(e),n=!0;function r(e){try{e.context=t.context}catch(e){this._debug("Could not copy transport context into XHR",e)}}return t.accept=function(e,t,r){return n||!t},t.newXMLHttpRequest=function(){return new window.XMLHttpRequest},t.xhrSend=function(e){var n=t.newXMLHttpRequest();r(n),n.withCredentials=!0,n.open("POST",e.url,!0!==e.sync);var i=e.headers;if(i)for(var s in i)i.hasOwnProperty(s)&&n.setRequestHeader(s,i[s]);return n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onload=function(){200===n.status?e.onSuccess(n.responseText):e.onError(n.statusText)},n.onabort=n.onerror=function(){e.onError(n.statusText)},n.send(e.body),n},t.transportSend=function(e,t){this._debug("Transport",this.getType(),"sending request",t.id,"envelope",e);var r=this;try{var i=!0;t.xhr=this.xhrSend({transport:this,url:e.url,sync:e.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(e.messages),onSuccess:function(i){r._debug("Transport",r.getType(),"received response",i);var s=!1;try{var o=r.convertToMessages(i);0===o.length?(n=!1,r.transportFailure(e,t,{httpCode:204})):(s=!0,r.transportSuccess(e,t,o))}catch(i){if(r._debug(i),!s){n=!1;var a={exception:i};a.httpCode=r.xhrStatus(t.xhr),r.transportFailure(e,t,a)}}},onError:function(s,o){r._debug("Transport",r.getType(),"received error",s,o),n=!1;var a={reason:s,exception:o};a.httpCode=r.xhrStatus(t.xhr),i?r.setTimeout((function(){r.transportFailure(e,t,a)}),0):r.transportFailure(e,t,a)}}),i=!1}catch(i){n=!1,this.setTimeout((function(){r.transportFailure(e,t,{exception:i})}),0)}},t.reset=function(t){e.reset(t),n=!0},t},a=function(){var e=new s,t=i.derive(e),n=0;function r(e,t,n){var r=this;return function(){r.transportFailure(e,t,"error",n)}}return t.accept=function(e,t,n){return!0},t.jsonpSend=function(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script"),i="_cometd_jsonp_"+n++;window[i]=function(n){t.removeChild(r),delete window[i],e.onSuccess(n)};var s=e.url;s+=s.indexOf("?")<0?"?":"&",s+="jsonp="+i,s+="&message="+encodeURIComponent(e.body),r.src=s,r.async=!0!==e.sync,r.type="application/javascript",r.onerror=function(t){e.onError("jsonp "+t.type)},t.appendChild(r)},t.transportSend=function(e,t){for(var n=this,i=0,s=e.messages.length,o=[];s>0;){var a=JSON.stringify(e.messages.slice(i,i+s)),c=e.url.length+encodeURI(a).length,u=this.getConfiguration().maxURILength;if(c>u){if(1===s){var l="Bayeux message too big ("+c+" bytes, max is "+u+") for transport "+this.getType();return void this.setTimeout(r.call(this,e,t,l),0)}--s}else o.push(s),i+=s,s=e.messages.length-i}var d=e;if(o.length>1){var p=0,h=o[0];this._debug("Transport",this.getType(),"split",e.messages.length,"messages into",o.join(" + ")),(d=this._mixin(!1,{},e)).messages=e.messages.slice(p,h),d.onSuccess=e.onSuccess,d.onFailure=e.onFailure;for(var f=1;f<o.length;++f){var y=this._mixin(!1,{},e);p=h,h+=o[f],y.messages=e.messages.slice(p,h),y.onSuccess=e.onSuccess,y.onFailure=e.onFailure,this.send(y,t.metaConnect)}}this._debug("Transport",this.getType(),"sending request",t.id,"envelope",d);try{var g=!0;this.jsonpSend({transport:this,url:d.url,sync:d.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(d.messages),onSuccess:function(e){var r=!1;try{var i=n.convertToMessages(e);0===i.length?n.transportFailure(d,t,{httpCode:204}):(r=!0,n.transportSuccess(d,t,i))}catch(e){n._debug(e),r||n.transportFailure(d,t,{exception:e})}},onError:function(e,r){var i={reason:e,exception:r};g?n.setTimeout((function(){n.transportFailure(d,t,i)}),0):n.transportFailure(d,t,i)}}),g=!1}catch(e){this.setTimeout((function(){n.transportFailure(d,t,{exception:e})}),0)}},t},c=function(){var e,t=new i,r=i.derive(t),s=!0,o=!1,a=!0,c=null,u=null,l=!1,d=null;function p(e,t){e&&(this.webSocketClose(e,t.code,t.reason),this.onClose(e,t))}function h(e){return e===u||e===c}function f(e,t,n){for(var r=[],i=0;i<t.messages.length;++i){var s=t.messages[i];s.id&&r.push(s.id)}e.envelopes[r.join(",")]=[t,n],this._debug("Transport",this.getType(),"stored envelope, envelopes",e.envelopes)}function y(t){if(!u){var n=e.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",n);try{var r=e.getConfiguration().protocol;t.webSocket=r?new window.WebSocket(n,r):new window.WebSocket(n),u=t}catch(e){throw s=!1,this._debug("Exception while creating WebSocket object",e),e}a=!1!==e.getConfiguration().stickyReconnect;var i=this,l=e.getConfiguration().connectTimeout;l>0&&(t.connectTimer=this.setTimeout((function(){e._debug("Transport",i.getType(),"timed out while connecting to URL",n,":",l,"ms"),p.call(i,t,{code:1e3,reason:"Connect Timeout"})}),l));var d=function(){e._debug("WebSocket onopen",t),t.connectTimer&&i.clearTimeout(t.connectTimer),h(t)?(u=null,c=t,o=!0,i.onOpen(t)):(e._warn("Closing extra WebSocket connection",this,"active connection",c),p.call(i,t,{code:1e3,reason:"Extra Connection"}))},f=function(n){n=n||{code:1e3},e._debug("WebSocket onclose",t,n,"connecting",u,"current",c),t.connectTimer&&i.clearTimeout(t.connectTimer),i.onClose(t,n)},y=function(n){e._debug("WebSocket onmessage",n,t),i.onMessage(t,n)};t.webSocket.onopen=d,t.webSocket.onclose=f,t.webSocket.onerror=function(){f({code:1e3,reason:"Error"})},t.webSocket.onmessage=y,this._debug("Transport",this.getType(),"configured callbacks on",t)}}function g(t,n,r){var i=JSON.stringify(n.messages);t.webSocket.send(i),this._debug("Transport",this.getType(),"sent",n,"/meta/connect =",r);var s=this.getConfiguration().maxNetworkDelay,o=s;r&&(o+=this.getAdvice().timeout,l=!0);for(var a=this,c=[],u=0;u<n.messages.length;++u)!function(){var r=n.messages[u];r.id&&(c.push(r.id),t.timeouts[r.id]=a.setTimeout((function(){e._debug("Transport",a.getType(),"timing out message",r.id,"after",o,"on",t),p.call(a,t,{code:1e3,reason:"Message Timeout"})}),o))}();this._debug("Transport",this.getType(),"waiting at most",o,"ms for messages",c,"maxNetworkDelay",s,", timeouts:",t.timeouts)}function v(e,t,n){try{null===e?(e=u||{envelopes:{},timeouts:{}},f.call(this,e,t,n),y.call(this,e)):(f.call(this,e,t,n),g.call(this,e,t,n))}catch(t){var r=this;this.setTimeout((function(){p.call(r,e,{code:1e3,reason:"Exception",exception:t})}),0)}}return r.reset=function(e){t.reset(e),s=!0,e&&(o=!1),a=!0,c=null,u=null,l=!1},r._notifySuccess=function(e,t){e.call(this,t)},r._notifyFailure=function(e,t,n,r){e.call(this,t,n,r)},r.onOpen=function(e){var t=e.envelopes;for(var n in this._debug("Transport",this.getType(),"opened",e,"pending messages",t),t)if(t.hasOwnProperty(n)){var r=t[n],i=r[0],s=r[1];d=i.onSuccess,g.call(this,e,i,s)}},r.onMessage=function(e,t){this._debug("Transport",this.getType(),"received websocket message",t,e);for(var r=!1,i=this.convertToMessages(t.data),s=[],o=0;o<i.length;++o){var a=i[o];if((/^\/meta\//.test(a.channel)||void 0===a.data)&&a.id){s.push(a.id);var c=e.timeouts[a.id];c&&(this.clearTimeout(c),delete e.timeouts[a.id],this._debug("Transport",this.getType(),"removed timeout for message",a.id,", timeouts",e.timeouts))}"/meta/connect"===a.channel&&(l=!1),"/meta/disconnect"!==a.channel||l||(r=!0)}for(var u=!1,p=e.envelopes,h=0;h<s.length;++h){var f=s[h];for(var y in p)if(p.hasOwnProperty(y)){var g=y.split(","),v=n.inArray(f,g);if(v>=0){u=!0,g.splice(v,1);var b=p[y][0],m=p[y][1];delete p[y],g.length>0&&(p[g.join(",")]=[b,m]);break}}}u&&this._debug("Transport",this.getType(),"removed envelope, envelopes",p),this._notifySuccess(d,i),r&&this.webSocketClose(e,1e3,"Disconnect")},r.onClose=function(e,t){this._debug("Transport",this.getType(),"closed",e,t),h(e)&&(s=a&&o,u=null,c=null);var n=e.timeouts;for(var r in e.timeouts={},n)n.hasOwnProperty(r)&&this.clearTimeout(n[r]);var i=e.envelopes;for(var d in e.envelopes={},i)if(i.hasOwnProperty(d)){var p=i[d][0];i[d][1]&&(l=!1);var f={websocketCode:t.code,reason:t.reason};t.exception&&(f.exception=t.exception),this._notifyFailure(p.onFailure,e,p.messages,f)}},r.registered=function(n,r){t.registered(n,r),e=r},r.accept=function(t,n,r){return this._debug("Transport",this.getType(),"accept, supported:",s),s&&!!window.WebSocket&&!1!==e.websocketEnabled},r.send=function(e,t){this._debug("Transport",this.getType(),"sending",e,"/meta/connect =",t),v.call(this,c,e,t)},r.webSocketClose=function(e,t,n){try{e.webSocket&&e.webSocket.close(t,n)}catch(e){this._debug(e)}},r.abort=function(){t.abort(),p.call(this,c,{code:1e3,reason:"Abort"}),this.reset(!0)},r},u=function(i){var s,u,l,d,p,h=new e,f=this,y=i||"default",g=!1,v=new r,b="disconnected",m=0,_=null,O=0,S=[],w=!1,T=0,j={},P=0,E=null,U=[],C={},R={},A={},I=!1,x=!1,M=0,D=0,k=null,N={useWorkerScheduler:!0,protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,urls:{},maxURILength:2e3,advice:{timeout:6e4,interval:0,reconnect:void 0,maxInterval:0}};function B(e,t){try{return e[t]}catch(e){return}}function F(e){return n.isString(e)}function L(e){return null!=e&&"function"==typeof e}function $(e,t){for(var n="";--t>0&&!(e>=Math.pow(10,t));)n+="0";return n+=e}function G(e,t){if(window.console){var n=window.console[e];if(L(n)){var r=new Date;[].splice.call(t,0,0,$(r.getHours(),2)+":"+$(r.getMinutes(),2)+":"+$(r.getSeconds(),2)+"."+$(r.getMilliseconds(),3)),n.apply(window.console,t)}}}function H(e){return new RegExp("(^https?://)?(((\\[[^\\]]+])|([^:/?#]+))(:(\\d+))?)?([^?#]*)(.*)?").exec(e)}function V(e){f._debug("Configuring cometd object with",e),F(e)&&(e={url:e}),e||(e={}),N=f._mixin(!1,N,e);var n=f.getURL();if(!n)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var r=H(n),i=r[2],s=r[8],o=r[9];if(g=f._isCrossDomain(i),N.appendMessageTypeToURL)if(void 0!==o&&o.length>0)f._info("Appending message type to URI "+s+o+" is not supported, disabling 'appendMessageTypeToURL' configuration"),N.appendMessageTypeToURL=!1;else{var a=s.split("/"),c=a.length-1;s.match(/\/$/)&&(c-=1),a[c].indexOf(".")>=0&&(f._info("Appending message type to URI "+s+" is not supported, disabling 'appendMessageTypeToURL' configuration"),N.appendMessageTypeToURL=!1)}if(window.Worker&&window.Blob&&window.URL&&N.useWorkerScheduler){var u=t.toString();u=u.substring(u.indexOf("{")+1,u.lastIndexOf("}"));var l=new window.Blob([u],{type:"application/json"}),d=window.URL.createObjectURL(l),p=new window.Worker(d);h.setTimeout=function(e,t){var n=h.register(e);return p.postMessage({id:n,type:"setTimeout",delay:t}),n},h.clearTimeout=function(e){h.unregister(e),p.postMessage({id:e,type:"clearTimeout"})},p.onmessage=function(e){var t=e.data.id,n=h.unregister(t);n&&n()}}}function q(e){if(e){var t=j[e.channel];t&&t[e.id]&&(delete t[e.id],f._debug("Removed",e.listener?"listener":"subscription",e))}}function J(e){e&&!e.listener&&q(e)}function X(){for(var e in j)if(j.hasOwnProperty(e)){var t=j[e];if(t)for(var n in t)t.hasOwnProperty(n)&&J(t[n])}}function W(e){b!==e&&(f._debug("Status",b,"->",e),b=e)}function Q(){return"disconnecting"===b||"disconnected"===b}function Y(){return""+ ++m}function K(e,t,n,r,i){try{return t.call(e,r)}catch(e){var s=f.onExtensionException;if(L(s)){f._debug("Invoking extension exception handler",n,e);try{s.call(f,e,n,i,r)}catch(e){f._info("Exception during execution of extension exception handler",n,e)}}else f._info("Exception during execution of extension",n,e);return r}}function z(e){for(var t=0;t<U.length&&null!=e;++t){var n=U[t],r=n.extension.incoming;if(L(r)){var i=K(n.extension,r,n.name,e,!1);e=void 0===i?e:i}}return e}function Z(e){for(var t=U.length-1;t>=0&&null!=e;--t){var n=U[t],r=n.extension.outgoing;if(L(r)){var i=K(n.extension,r,n.name,e,!0);e=void 0===i?e:i}}return e}function ee(e,t){var n=j[e];if(n)for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(i)try{i.callback.call(i.scope,t)}catch(e){var s=f.onListenerException;if(L(s)){f._debug("Invoking listener exception handler",i,e);try{s.call(f,e,i,i.listener,t)}catch(e){f._info("Exception during execution of listener exception handler",i,e)}}else f._info("Exception during execution of listener",i,t,e)}}}function te(e,t){ee(e,t);for(var n=e.split("/"),r=n.length-1,i=r;i>0;--i){var s=n.slice(0,i).join("/")+"/*";i===r&&ee(s,t),ee(s+="*",t)}}function ne(){null!==E&&f.clearTimeout(E),E=null}function re(e,t){ne();var n=C.interval+t;f._debug("Function scheduled in",n,"ms, interval =",C.interval,"backoff =",P,e),E=f.setTimeout(e,n)}function ie(e,t,n){for(var r=0;r<e.length;++r){var i=e[r],o=i.id;_&&(i.clientId=_),null!=(i=Z(i))?(i.id=o,e[r]=i):(delete R[o],e.splice(r--,1))}if(0!==e.length){t&&(k=e[0]);var a=f.getURL();N.appendMessageTypeToURL&&(a.match(/\/$/)||(a+="/"),n&&(a+=n));var c={url:a,sync:!1,messages:e,onSuccess:function(e){try{d.call(f,e)}catch(e){f._info("Exception during handling of messages",e)}},onFailure:function(e,t,n){try{var r=f.getTransport();n.connectionType=r?r.getType():"unknown",p.call(f,e,t,n)}catch(e){f._info("Exception during handling of failure",e)}}};f._debug("Send",c),s.send(c,t)}}function se(e){O>0||!0===w?S.push(e):ie([e],!1)}function oe(){P=0}function ae(){return P<N.maxBackoff&&(P+=N.backoffIncrement),P}function ce(){++O,f._debug("Starting batch, depth",O)}function ue(){var e=S;S=[],e.length>0&&ie(e,!1)}function le(){if(--O,f._debug("Ending batch, depth",O),O<0)throw"Calls to startBatch() and endBatch() are not paired";0!==O||Q()||w||ue()}function de(){if(!Q()){var e={id:Y(),channel:"/meta/connect",connectionType:s.getType()};x||(e.advice={timeout:0}),W("connecting"),f._debug("Connect sent",e),ie([e],!0,"connect"),W("connected")}}function pe(e){W("connecting"),re((function(){de()}),e)}function he(e){e&&(C=f._mixin(!1,{},N.advice,e),f._debug("New advice",C))}function fe(e){if(ne(),e&&s&&s.abort(),g=!1,s=null,W("disconnected"),_=null,O=0,oe(),I=!1,x=!1,M=0,k=null,S.length>0){var t=S;S=[],p.call(f,void 0,t,{reason:"Disconnected"})}}function ye(e,t,n){var r=f.onTransportException;if(L(r)){f._debug("Invoking transport exception handler",e,t,n);try{r.call(f,n,e,t)}catch(e){f._info("Exception during execution of transport exception handler",e)}}}function ge(e,t){L(e)&&(t=e,e=void 0),_=null,X(),Q()&&v.reset(!0),he({}),O=0,w=!0,u=e,l=t;var n="1.0",r=f.getURL(),i=v.findTransportTypes(n,g,r),o={id:Y(),version:n,minimumVersion:n,channel:"/meta/handshake",supportedConnectionTypes:i,advice:{timeout:C.timeout,interval:C.interval}},a=f._mixin(!1,{},u,o);if(f._putCallback(a.id,t),!s&&!(s=v.negotiateTransport(i,n,g,r))){var c="Could not find initial transport among: "+v.getTransportTypes();throw f._warn(c),c}f._debug("Initial transport is",s.getType()),W("handshaking"),f._debug("Handshake sent",a),ie([a],!1,"handshake")}function ve(e){W("handshaking"),w=!0,re((function(){ge(u,l)}),e)}function be(e,t){try{e.call(f,t)}catch(e){var n=f.onCallbackException;if(L(n)){f._debug("Invoking callback exception handler",e);try{n.call(f,e,t)}catch(e){f._info("Exception during execution of callback exception handler",e)}}else f._info("Exception during execution of message callback",e)}}function me(e){var t=f._getCallback([e.id]);L(t)&&(delete R[e.id],be(t,e))}function _e(e){var t=A[e.id];if(delete A[e.id],t){f._debug("Handling remote call response for",e,"with context",t);var n=t.timeout;n&&f.clearTimeout(n);var r=t.callback;if(L(r))return be(r,e),!0}return!1}function Oe(e){f._debug("Transport failure handling",e),e.transport&&(s=e.transport),e.url&&s.setURL(e.url);var t=e.action,n=e.delay||0;switch(t){case"handshake":ve(n);break;case"retry":pe(n);break;case"none":fe(!0);break;default:throw"Unknown action "+t}}function Se(e,t){me(e),te("/meta/handshake",e),te("/meta/unsuccessful",e),Q()&&(t.action="none"),f.onTransportFailure.call(f,e,t,Oe)}function we(e){var t=f.getURL();if(e.successful){var n=f._isCrossDomain(H(t)[2]),r=v.negotiateTransport(e.supportedConnectionTypes,e.version,n,t);if(null===r)return e.successful=!1,void Se(e,{cause:"negotiation",action:"none",transport:null});s!==r&&(f._debug("Transport",s.getType(),"->",r.getType()),s=r),_=e.clientId,w=!1,ue(),e.reestablish=I,I=!0,me(e),te("/meta/handshake",e),D=e["x-messages"]||0;var i=Q()?"none":C.reconnect||"retry";switch(i){case"retry":oe(),0===D?pe(0):f._debug("Processing",D,"handshake-delivered messages");break;case"none":fe(!0);break;default:throw"Unrecognized advice action "+i}}else Se(e,{cause:"unsuccessful",action:C.reconnect||"handshake",transport:s})}function Te(e){Se(e,{cause:"failure",action:"handshake",transport:null})}function je(e){return"disconnected"===b||!(!k||k.id!==e.id)&&(k=null,!0)}function Pe(e,t){te("/meta/connect",e),te("/meta/unsuccessful",e),Q()&&(t.action="none"),f.onTransportFailure.call(f,e,t,Oe)}function Ee(e){if(je(e))if(x=e.successful){te("/meta/connect",e);var t=Q()?"none":C.reconnect||"retry";switch(t){case"retry":oe(),pe(P);break;case"none":fe(!1);break;default:throw"Unrecognized advice action "+t}}else Pe(e,{cause:"unsuccessful",action:C.reconnect||"retry",transport:s});else f._debug("Mismatched /meta/connect reply",e)}function Ue(e){je(e)?(x=!1,Pe(e,{cause:"failure",action:"retry",transport:null})):f._debug("Mismatched /meta/connect failure",e)}function Ce(e){fe(!0),me(e),te("/meta/disconnect",e),te("/meta/unsuccessful",e)}function Re(e){e.successful?(fe(!1),me(e),te("/meta/disconnect",e)):Ce(e)}function Ae(e){Ce(e)}function Ie(e){var t=j[e.subscription];if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r&&!r.listener&&(delete t[n],f._debug("Removed failed subscription",r))}me(e),te("/meta/subscribe",e),te("/meta/unsuccessful",e)}function xe(e){e.successful?(me(e),te("/meta/subscribe",e)):Ie(e)}function Me(e){Ie(e)}function De(e){me(e),te("/meta/unsubscribe",e),te("/meta/unsuccessful",e)}function ke(e){e.successful?(me(e),te("/meta/unsubscribe",e)):De(e)}function Ne(e){De(e)}function Be(e){_e(e)||(me(e),te("/meta/publish",e),te("/meta/unsuccessful",e))}function Fe(e){void 0!==e.data?_e(e)||(te(e.channel,e),D>0&&0==--D&&(f._debug("Processed last handshake-delivered message"),pe(0))):void 0===e.successful?f._warn("Unknown Bayeux Message",e):e.successful?(me(e),te("/meta/publish",e)):Be(e)}function Le(e){Be(e)}function $e(e){if(M=0,null!=(e=z(e)))switch(he(e.advice),e.channel){case"/meta/handshake":we(e);break;case"/meta/connect":Ee(e);break;case"/meta/disconnect":Re(e);break;case"/meta/subscribe":xe(e);break;case"/meta/unsubscribe":ke(e);break;default:Fe(e)}}function Ge(e){var t=j[e];if(t)for(var n in t)if(t.hasOwnProperty(n)&&t[n])return!0;return!1}function He(e,t){var n={scope:e,method:t};if(L(e))n.scope=void 0,n.method=e;else if(F(t)){if(!e)throw"Invalid scope "+e;if(n.method=e[t],!L(n.method))throw"Invalid callback "+t+" for scope "+e}else if(!L(t))throw"Invalid callback "+t;return n}function Ve(e,t,n,r){var i=He(t,n);f._debug("Adding",r?"listener":"subscription","on",e,"with scope",i.scope,"and callback",i.method);var s=++T,o={id:s,channel:e,scope:i.scope,callback:i.method,listener:r},a=j[e];return a||(a={},j[e]=a),a[s]=o,f._debug("Added",r?"listener":"subscription",o),o}this._mixin=function(e,t,n){for(var r=t||{},i=2;i<arguments.length;++i){var s=arguments[i];if(null!=s)for(var o in s)if(s.hasOwnProperty(o)){var a=B(s,o),c=B(r,o);if(a===t)continue;if(void 0===a)continue;if(e&&"object"==typeof a&&null!==a)if(a instanceof Array)r[o]=this._mixin(e,c instanceof Array?c:[],a);else{var u="object"!=typeof c||c instanceof Array?{}:c;r[o]=this._mixin(e,u,a)}else r[o]=a}}return r},this._warn=function(){G("warn",arguments)},this._info=function(){"warn"!==N.logLevel&&G("info",arguments)},this._debug=function(){"debug"===N.logLevel&&G("debug",arguments)},this._isCrossDomain=function(e){return!!(window.location&&window.location.host&&e)&&e!==window.location.host},this.send=se,this._getCallback=function(e){return R[e]},this._putCallback=function(e,t){var n=this._getCallback(e);return L(t)&&(R[e]=t),n},this.onTransportFailure=function(e,t,n){this._debug("Transport failure",t,"for",e);var r=this.getTransportRegistry(),i=this.getURL(),o=this._isCrossDomain(H(i)[2]),a="1.0",c=r.findTransportTypes(a,o,i);if("none"===t.action){if("/meta/handshake"===e.channel&&!t.transport){var u="Could not negotiate transport, client=["+c+"], server=["+e.supportedConnectionTypes+"]";this._warn(u),ye(s.getType(),null,{reason:u,connectionType:s.getType(),transport:s})}}else if(t.delay=this.getBackoffPeriod(),"/meta/handshake"===e.channel){if(!t.transport){var l=s?s.getType():null,d=r.negotiateTransport(c,a,o,i);if(d){var p=d.getType();this._debug("Transport",l,"->",p),ye(l,p,e.failure),t.action="handshake",t.transport=d}else this._warn("Could not negotiate transport, client=["+c+"]"),ye(l,null,e.failure),t.action="none"}"none"!==t.action&&this.increaseBackoffPeriod()}else{var h=(new Date).getTime();if(0===M&&(M=h),"retry"===t.action){t.delay=this.increaseBackoffPeriod();var y=C.maxInterval;if(y>0){var g=C.timeout+C.interval+y;h-M+P>g&&(t.action="handshake")}}"handshake"===t.action&&(t.delay=0,r.reset(!1),this.resetBackoffPeriod())}n.call(f,t)},this.receive=$e,d=function(e){f._debug("Received",e);for(var t=0;t<e.length;++t)$e(e[t])},p=function(e,t,n){f._debug("handleFailure",e,t,n),n.transport=e;for(var r=0;r<t.length;++r){var i=t[r],s={id:i.id,successful:!1,channel:i.channel,failure:n};switch(n.message=i,i.channel){case"/meta/handshake":Te(s);break;case"/meta/connect":Ue(s);break;case"/meta/disconnect":Ae(s);break;case"/meta/subscribe":s.subscription=i.subscription,Me(s);break;case"/meta/unsubscribe":s.subscription=i.subscription,Ne(s);break;default:Le(s)}}},this.registerTransport=function(e,t,n){var r=v.add(e,t,n);return r&&(this._debug("Registered transport",e),L(t.registered)&&t.registered(e,this)),r},this.unregisterTransport=function(e){var t=v.remove(e);return null!==t&&(this._debug("Unregistered transport",e),L(t.unregistered)&&t.unregistered()),t},this.unregisterTransports=function(){v.clear()},this.getTransportTypes=function(){return v.getTransportTypes()},this.findTransport=function(e){return v.find(e)},this.getTransportRegistry=function(){return v},this.configure=function(e){V.call(this,e)},this.init=function(e,t){this.configure(e),this.handshake(t)},this.handshake=function(e,t){if("disconnected"!==b)throw"Illegal state: handshaken";ge(e,t)},this.disconnect=function(e,t){if(!Q()){L(e)&&(t=e,e=void 0);var n={id:Y(),channel:"/meta/disconnect"},r=this._mixin(!1,{},e,n);f._putCallback(r.id,t),W("disconnecting"),ie([r],!1,"disconnect")}},this.startBatch=function(){ce()},this.endBatch=function(){le()},this.batch=function(e,t){var n=He(e,t);this.startBatch();try{n.method.call(n.scope),this.endBatch()}catch(e){throw this._info("Exception during execution of batch",e),this.endBatch(),e}},this.addListener=function(e,t,n){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!F(e))throw"Illegal argument type: channel must be a string";return Ve(e,t,n,!0)},this.removeListener=function(e){if(!e||!e.channel||!("id"in e))throw"Invalid argument: expected subscription, not "+e;q(e)},this.clearListeners=function(){j={}},this.subscribe=function(e,t,n,r,i){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!F(e))throw"Illegal argument type: channel must be a string";if(Q())throw"Illegal state: disconnected";L(t)&&(i=r,r=n,n=t,t=void 0),L(r)&&(i=r,r=void 0);var s=!Ge(e),o=Ve(e,t,n,!1);if(s){var a={id:Y(),channel:"/meta/subscribe",subscription:e},c=this._mixin(!1,{},r,a);f._putCallback(c.id,i),se(c)}return o},this.unsubscribe=function(e,t,n){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(Q())throw"Illegal state: disconnected";L(t)&&(n=t,t=void 0),this.removeListener(e);var r=e.channel;if(!Ge(r)){var i={id:Y(),channel:"/meta/unsubscribe",subscription:r},s=this._mixin(!1,{},t,i);f._putCallback(s.id,n),se(s)}},this.resubscribe=function(e,t){if(J(e),e)return this.subscribe(e.channel,e.scope,e.callback,t)},this.clearSubscriptions=function(){X()},this.publish=function(e,t,n,r){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!F(e))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(e))throw"Illegal argument: cannot publish to meta channels";if(Q())throw"Illegal state: disconnected";L(t)?(r=t,t={},n=void 0):L(n)&&(r=n,n=void 0);var i={id:Y(),channel:e,data:t},s=this._mixin(!1,{},n,i);f._putCallback(s.id,r),se(s)},this.publishBinary=function(e,t,n,r,i){L(t)?(i=t,t=new ArrayBuffer(0),n=!0,r=void 0):L(n)?(i=n,n=!0,r=void 0):L(r)&&(i=r,r=void 0);var s={meta:r,data:t,last:n},o={ext:{binary:{}}};this.publish(e,s,o,i)},this.remoteCall=function(e,t,n,r,i){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!F(e))throw"Illegal argument type: target must be a string";if(Q())throw"Illegal state: disconnected";if(L(t)?(i=t,t={},n=N.maxNetworkDelay,r=void 0):L(n)?(i=n,n=N.maxNetworkDelay,r=void 0):L(r)&&(i=r,r=void 0),"number"!=typeof n)throw"Illegal argument type: timeout must be a number";e.match(/^\//)||(e="/"+e);var s="/service"+e,o={id:Y(),channel:s,data:t},a=this._mixin(!1,{},r,o),c={callback:i};n>0&&(c.timeout=f.setTimeout((function(){f._debug("Timing out remote call",a,"after",n,"ms"),Be({id:a.id,error:"406::timeout",successful:!1,failure:{message:a,reason:"Remote Call Timeout"}})}),n),f._debug("Scheduled remote call timeout",a,"in",n,"ms")),A[a.id]=c,se(a)},this.remoteCallBinary=function(e,t,n,r,i,s){L(t)?(s=t,t=new ArrayBuffer(0),n=!0,r=void 0,i=N.maxNetworkDelay):L(n)?(s=n,n=!0,r=void 0,i=N.maxNetworkDelay):L(r)?(s=r,r=void 0,i=N.maxNetworkDelay):L(i)&&(s=i,i=N.maxNetworkDelay);var o={meta:r,data:t,last:n},a={ext:{binary:{}}};this.remoteCall(e,o,i,a,s)},this.getStatus=function(){return b},this.isDisconnected=Q,this.setBackoffIncrement=function(e){N.backoffIncrement=e},this.getBackoffIncrement=function(){return N.backoffIncrement},this.getBackoffPeriod=function(){return P},this.increaseBackoffPeriod=function(){return ae()},this.resetBackoffPeriod=function(){oe()},this.setLogLevel=function(e){N.logLevel=e},this.registerExtension=function(e,t){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!F(e))throw"Illegal argument type: extension name must be a string";for(var n=!1,r=0;r<U.length;++r)if(U[r].name===e){n=!0;break}return n?(this._info("Could not register extension with name",e,"since another extension with the same name already exists"),!1):(U.push({name:e,extension:t}),this._debug("Registered extension",e),L(t.registered)&&t.registered(e,this),!0)},this.unregisterExtension=function(e){if(!F(e))throw"Illegal argument type: extension name must be a string";for(var t=!1,n=0;n<U.length;++n){var r=U[n];if(r.name===e){U.splice(n,1),t=!0,this._debug("Unregistered extension",e);var i=r.extension;L(i.unregistered)&&i.unregistered();break}}return t},this.getExtension=function(e){for(var t=0;t<U.length;++t){var n=U[t];if(n.name===e)return n.extension}return null},this.getName=function(){return y},this.getClientId=function(){return _},this.getURL=function(){if(s){var e=s.getURL();if(e)return e;if(e=N.urls[s.getType()])return e}return N.url},this.getTransport=function(){return s},this.getConfiguration=function(){return this._mixin(!0,{},N)},this.getAdvice=function(){return this._mixin(!0,{},C)},this.setTimeout=function(e,t){return h.setTimeout((function(){try{f._debug("Invoking timed function",e),e()}catch(t){f._debug("Exception invoking timed function",e,t)}}),t)},this.clearTimeout=function(e){h.clearTimeout(e)},window.WebSocket&&this.registerTransport("websocket",new c),this.registerTransport("long-polling",new o),this.registerTransport("callback-polling",new a)},l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",".","-",":","+","=","^","!","/","*","?","&","<",">","(",")","[","]","{","}","@","%","$","#"],d=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0];return{CometD:u,Transport:i,RequestTransport:s,LongPollingTransport:o,CallbackPollingTransport:a,WebSocketTransport:c,Utils:n,Z85:{encode:function(e){var t=null;if(e instanceof ArrayBuffer?t=e:e.buffer instanceof ArrayBuffer?t=e.buffer:Array.isArray(e)&&(t=new Uint8Array(e).buffer),null==t)throw"Cannot Z85 encode "+e;for(var n=t.byteLength,r=n%4,i=4-(0===r?4:r),s=new DataView(t),o="",a=0,c=0;c<n+i;++c){var u=c>=n;if(a=256*a+(u?0:s.getUint8(c)),(c+1)%4==0){for(var d=52200625,p=5;p>0;--p){if(!u||p>i){var h=Math.floor(a/d)%85;o+=l[h]}d/=85}a=0}}return o},decode:function(e){for(var t=e.length%5,n=5-(0===t?5:t),r=0;r<n;++r)e+=l[l.length-1];for(var i=e.length,s=new ArrayBuffer(4*i/5-n),o=new DataView(s),a=0,c=0,u=0,p=0;p<i;++p){var h=e.charCodeAt(c++)-32;if(a=85*a+d[h],c%5==0){for(var f=16777216;f>=1;)u<o.byteLength&&o.setUint8(u++,Math.floor(a/f)%256),f/=256;a=0}}return s}}}}()},54098:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=l(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var n,r,i=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function O(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},v.call(m.prototype),v.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},O.error=function(){var e=new O(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];O.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new O(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,n){return new Promise((function(r,s){var o=new m(e,n);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new O(i,n))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}w.polyfill=!0,e.fetch||(e.fetch=w,e.Headers=p,e.Request=m,e.Response=O),t.Headers=p,t.Request=m,t.Response=O,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},6230:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},92599:function(e,t,n){const r=n(23524);e.exports={CometD:r.CometD,default:r}}}]);